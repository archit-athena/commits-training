{"prompt": "feat(router): add payments create-intent flow for v2 (#6193)\n\nCo-authored-by: hrithikesh026 <hrithikesh.vm@juspay.in>\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>\nCo-authored-by: Hrithikesh <61539176+hrithikesh026@users.noreply.github.com>", "response": "Files to modify:\n\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsCreateIntentRequest\n    - impl: impl ApiEventMetric for PaymentsCreateIntentResponse\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**crypto.rs**\n  Add:\n    - function: pub::deserialize_inner_value\n\n**events.rs**\n  Modify existing code\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsCreateIntentRequest\n    - impl: impl ApiEventMetric for PaymentsCreateIntentResponse\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsCreateIntentRequest\n    - impl: impl ApiEventMetric for PaymentsCreateIntentResponse\n\n**profile.rs**\n  Add:\n    - function: private::from_str\n    - impl: impl FromStr for ProfileId\n\n**lib.rs**\n  Add:\n    - function: pub::generate_time_ordered_id_without_prefix\n\n**types.rs**\n  Add:\n    - function: pub::new\n\n**payment_intent.rs**\n  Modify existing code\n\n**schema_v2.rs**\n  Modify existing code\n\n**lib.rs**\n  Add:\n    - function: pub::generate_time_ordered_id_without_prefix\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**payment_intent.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**router_request_types.rs**\n  Remove:\n    - function: pub::is_request_surcharge_matching\n\n**customers.rs**\n  Modify existing code\n\n**payment_intents.rs**\n  Modify existing code\n\n**refunds.rs**\n  Modify existing code\n\n**setup_intents.rs**\n  Modify existing code\n\n**admin.rs**\n  Modify existing code\n\n**customers.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Modify existing code\n\n**cards.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**helpers.rs**\n  Modify existing code\n\n**operations.rs**\n  Add:\n    - function: private::get_customer_details\n    - struct: pub::ValidateResult\n    - struct: pub::GetTrackerResponse\n    - trait: pub::ValidateRequest\n    - trait: pub::GetTracker\n    - mod: pub::payment_create_intent\n\n**payment_confirm.rs**\n  Modify existing code\n\n**payment_create.rs**\n  Modify existing code\n\n**payment_create_intent.rs**\n  Add:\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::get_trackers\n    - function: private::update_trackers\n    - function: private::validate_request\n    - function: private::get_customer_details\n    - function: private::make_pm_data\n    - function: private::get_connector\n    - function: private::guard_payment_against_blocklist\n    - struct: pub::PaymentCreateIntent\n    - impl: impl Operation<F, PaymentsCreateIntentRequest> for &PaymentCreateIntent\n    - impl: impl Operation<F, PaymentsCreateIntentRequest> for PaymentCreateIntent\n    - impl: impl GetTracker<F, payments::PaymentIntentData<F>, PaymentsCreateIntentRequest> for PaymentCreateIntent\n    - impl: impl UpdateTracker<F, payments::PaymentIntentData<F>, PaymentsCreateIntentRequest> for PaymentCreateIntent\n    - impl: impl ValidateRequest<F, PaymentsCreateIntentRequest, payments::PaymentIntentData<F>> for PaymentCreateIntent\n    - impl: impl Domain<F, PaymentsCreateIntentRequest, payments::PaymentIntentData<F>> for PaymentCreateIntent\n\n**payment_response.rs**\n  Modify existing code\n\n**payment_update.rs**\n  Modify existing code\n\n**tax_calculation.rs**\n  Modify existing code\n\n**tokenization.rs**\n  Modify existing code\n\n**transformers.rs**\n  Add:\n    - function: private::generate_response\n    - function: private::try_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - function: private::foreign_from\n    - impl: impl ToResponse<F, D, Op> for api::PaymentsCreateIntentResponse\n    - impl: impl TryFrom<PaymentAdditionalData<'_, F>> for types::PaymentsSessionData\n    - impl: impl ForeignFrom<api_models::payments::AmountDetails> for hyperswitch_domain_models::payments::AmountDetails\n    - impl: impl ForeignFrom<hyperswitch_domain_models::payments::AmountDetails> for api_models::payments::AmountDetails\n    - impl: impl ForeignFrom<common_enums::TaxCalculationOverride> for hyperswitch_domain_models::payments::TaxCalculationOverride\n    - impl: impl ForeignFrom<hyperswitch_domain_models::payments::TaxCalculationOverride> for common_enums::TaxCalculationOverride\n    - impl: impl ForeignFrom<common_enums::SurchargeCalculationOverride> for hyperswitch_domain_models::payments::SurchargeCalculationOverride\n    - impl: impl ForeignFrom<hyperswitch_domain_models::payments::SurchargeCalculationOverride> for common_enums::SurchargeCalculationOverride\n    - impl: impl ForeignFrom<api_models::admin::PaymentLinkConfigRequest> for diesel_models::PaymentLinkConfigRequestForPayments\n    - impl: impl ForeignFrom<api_models::admin::PaymentLinkTransactionDetails> for diesel_models::PaymentLinkTransactionDetails\n    - impl: impl ForeignFrom<api_models::admin::TransactionDetailsUiConfiguration> for diesel_models::TransactionDetailsUiConfiguration\n    - impl: impl ForeignFrom<diesel_models::PaymentLinkConfigRequestForPayments> for api_models::admin::PaymentLinkConfigRequest\n    - impl: impl ForeignFrom<diesel_models::PaymentLinkTransactionDetails> for api_models::admin::PaymentLinkTransactionDetails\n    - impl: impl ForeignFrom<diesel_models::TransactionDetailsUiConfiguration> for api_models::admin::TransactionDetailsUiConfiguration\n\n**helpers.rs**\n  Modify existing code\n\n**pm_auth.rs**\n  Modify existing code\n\n**lib.rs**\n  Add:\n    - function: pub::generate_time_ordered_id_without_prefix\n\n**app.rs**\n  Modify existing code\n\n**currency.rs**\n  Modify existing code\n\n**customers.rs**\n  Modify existing code\n\n**disputes.rs**\n  Modify existing code\n\n**ephemeral_key.rs**\n  Modify existing code\n\n**files.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**lock_utils.rs**\n  Modify existing code\n\n**mandates.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**payouts.rs**\n  Modify existing code\n\n**profiles.rs**\n  Modify existing code\n\n**refunds.rs**\n  Modify existing code\n\n**verification.rs**\n  Modify existing code\n\n**api.rs**\n  Add:\n    - impl: impl Authenticate for api_models::payments::PaymentsCreateIntentRequest\n\n**authentication.rs**\n  Add:\n    - function: private::get_merchant_id\n    - function: private::authenticate_and_fetch\n    - function: private::authenticate_and_fetch\n    - struct: pub::AuthenticationDataV2\n    - struct: pub::ApiKeyAuthV2\n    - impl: impl AuthInfo for AuthenticationDataV2\n    - impl: impl AuthenticateAndFetch<AuthenticationDataV2, A> for ApiKeyAuth\n    - impl: impl AuthenticateAndFetch<AuthenticationDataV2, A> for HeaderAuth<I>\n\n**admin.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: pub::get_feature_metadata_as_value\n    - function: pub::get_connector_metadata_as_value\n    - function: pub::get_allowed_payment_method_types_as_value\n    - function: pub::get_order_details_as_value\n    - function: pub::new\n    - function: pub::order_amount\n    - function: pub::currency\n    - function: pub::shipping_cost\n    - function: pub::order_tax_amount\n    - function: pub::skip_external_tax_calculation\n    - function: pub::skip_surcharge_calculation\n    - function: pub::surcharge_amount\n    - function: pub::tax_on_surcharge\n    - struct: pub::AmountDetailsSetter\n    - impl: impl PaymentsCreateIntentRequest\n    - impl: impl AmountDetails\n    - impl: impl masking::SerializableSecret for Address\n    - impl: impl masking::SerializableSecret for OrderDetailsWithAmount\n\n**types.rs**\n  Add:\n    - function: pub::new"}
