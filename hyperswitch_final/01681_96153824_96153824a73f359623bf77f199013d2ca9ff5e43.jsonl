{"prompt": "feat(payment_methods_session_v2): add payment methods session endpoints (#7107)\n\nCo-authored-by: Sanchith Hegde <sanchith.hegde@juspay.in>\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>\nCo-authored-by: Anurag Thakur <anurag.thakur@juspay.in>\nCo-authored-by: Pa1NarK <69745008+pixincreate@users.noreply.github.com>\nCo-authored-by: Shankar Singh C <83439957+ShankarSinghC@users.noreply.github.com>\nCo-authored-by: Sai Harsha Vardhan <56996463+sai-harsha-vardhan@users.noreply.github.com>\nCo-authored-by: hrithikesh026 <hrithikesh.vm@juspay.in>\nCo-authored-by: Debarati Ghatak <88573135+cookieg13@users.noreply.github.com>\nCo-authored-by: awasthi21 <107559116+awasthi21@users.noreply.github.com>\nCo-authored-by: Gnanasundari24 <118818938+Gnanasundari24@users.noreply.github.com>\nCo-authored-by: github-actions <41898282+github-actions[bot]@users.noreply.github.com>\nCo-authored-by: Arindam Sahoo <88739246+arindam-sahoo@users.noreply.github.com>\nCo-authored-by: Arindam Sahoo <arindam.sahoo@Arindam-Sahoo-F565040VFJ.local>\nCo-authored-by: Sakil Mostak <73734619+Sakilmostak@users.noreply.github.com>\nCo-authored-by: AkshayaFoiger <131388445+AkshayaFoiger@users.noreply.github.com>\nCo-authored-by: Riddhiagrawal001 <50551695+Riddhiagrawal001@users.noreply.github.com>\nCo-authored-by: Suman Maji <77887221+sumanmaji4@users.noreply.github.com>\nCo-authored-by: Sandeep Kumar <83278309+tsdk02@users.noreply.github.com>\nCo-authored-by: Debarshi Gupta <debarshigupta47@gmail.com>\nCo-authored-by: Debarshi Gupta <debarshi.gupta@Debarshi-Gupta-CM92YWDXFD.local>\nCo-authored-by: Sanchith Hegde <22217505+SanchithHegde@users.noreply.github.com>\nCo-authored-by: Swangi Kumari <85639103+swangi-kumari@users.noreply.github.com>\nCo-authored-by: pranav-arjunan <pranav.arjunan@juspay.in>\nCo-authored-by: Kashif <kashif.dev@protonmail.com>\nCo-authored-by: Sagnik Mitra <83326850+ImSagnik007@users.noreply.github.com>\nCo-authored-by: sweta-kumari-sharma <77436883+Sweta-Kumari-Sharma@users.noreply.github.com>", "response": "Files to modify:\n\n\n**customers.rs**\n  Modify existing code\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**events.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentMethodIntentConfirmInternal\n    - impl: impl ApiEventMetric for PaymentMethodSessionRequest\n    - impl: impl ApiEventMetric for PaymentMethodsSessionResponse\n\n**payment.rs**\n  Remove:\n    - impl: impl ApiEventMetric for PaymentsResponse\n  Add:\n    - impl: impl ApiEventMetric for payments::PaymentsResponse\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**payments.rs**\n  Modify existing code\n\n**webhooks.rs**\n  Modify existing code\n\n**enums.rs**\n  Add:\n    - enum: pub::TokenizationType\n    - enum: pub::NetworkTokenizationToggle\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**crypto.rs**\n  Add:\n    - function: pub::map\n\n**events.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentMethodIntentConfirmInternal\n    - impl: impl ApiEventMetric for PaymentMethodSessionRequest\n    - impl: impl ApiEventMetric for PaymentMethodsSessionResponse\n\n**id_type.rs**\n  Remove:\n    - mod: private::ephemeral_key\n  Add:\n    - mod: private::client_secret\n\n**client_secret.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: pub::generate_redis_key\n    - impl: impl crate::events::ApiEventMetric for ClientSecretId\n    - impl: impl ClientSecretId\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**global_id.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**authentication.rs**\n  Add:\n    - function: pub::to_str\n    - enum: pub::ResourceId\n    - impl: impl ResourceId\n\n**customers.rs**\n  Modify existing code\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**lib.rs**\n  Add:\n    - mod: pub::payment_methods_session\n\n**payment_methods_session.rs**\n  Add:\n    - struct: pub::PaymentMethodsSession\n\n**deutschebank.rs**\n  Modify existing code\n\n**customer.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**openapi_v2.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Add:\n    - function: pub::payment_method_session_create\n    - function: pub::payment_method_session_retrieve\n    - function: pub::payment_method_session_list_payment_methods\n\n**consts.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**cards.rs**\n  Modify existing code\n\n**surcharge_decision_configs.rs**\n  Remove:\n    - function: pub::perform_surcharge_decision_management_for_saved_cards\n\n**transformers.rs**\n  Add:\n    - function: private::foreign_try_from\n    - function: private::foreign_from\n    - impl: impl transformers::ForeignTryFrom<domain::PaymentMethod> for api::CustomerPaymentMethod\n    - impl: impl transformers::ForeignFrom<(\nhyperswitch_domain_models::payment_methods::PaymentMethodsSession,\nSecret<String>,\n)> for api_models::payment_methods::PaymentMethodsSessionResponse\n\n**helpers.rs**\n  Modify existing code\n\n**transformers.rs**\n  Add:\n    - function: private::foreign_try_from\n    - function: private::foreign_from\n    - impl: impl transformers::ForeignTryFrom<domain::PaymentMethod> for api::CustomerPaymentMethod\n    - impl: impl transformers::ForeignFrom<(\nhyperswitch_domain_models::payment_methods::PaymentMethodsSession,\nSecret<String>,\n)> for api_models::payment_methods::PaymentMethodsSessionResponse\n\n**helpers.rs**\n  Modify existing code\n\n**db.rs**\n  Add:\n    - mod: pub::payment_method_session\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**kafka_store.rs**\n  Remove:\n    - function: private::create_ephemeral_key\n    - function: private::get_ephemeral_key\n  Add:\n    - function: private::create_client_secret\n    - function: private::get_client_secret\n    - function: private::insert_payment_methods_session\n    - function: private::get_payment_methods_session\n    - impl: impl db::payment_method_session::PaymentMethodsSessionInterface for KafkaStore\n    - impl: impl db::payment_method_session::PaymentMethodsSessionInterface for KafkaStore\n\n**payment_method_session.rs**\n  Add:\n    - function: private::insert_payment_methods_session\n    - function: private::get_payment_methods_session\n    - function: private::insert_payment_methods_session\n    - function: private::get_payment_methods_session\n    - trait: pub::PaymentMethodsSessionInterface\n    - trait: pub::PaymentMethodsSessionInterface\n    - impl: impl PaymentMethodsSessionInterface for crate::services::Store\n    - impl: impl PaymentMethodsSessionInterface for Store\n    - impl: impl PaymentMethodsSessionInterface for MockDb\n    - impl: impl PaymentMethodsSessionInterface for MockDb\n    - mod: private::storage\n\n**lib.rs**\n  Add:\n    - mod: pub::payment_methods_session\n\n**routes.rs**\n  Modify existing code\n\n**app.rs**\n  Add:\n    - function: pub::server\n    - struct: pub::PaymentMethodsSession\n    - impl: impl PaymentMethodsSession\n\n**customers.rs**\n  Modify existing code\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**lock_utils.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - function: private::from\n    - struct: pub::PaymentMethodIntentConfirmInternal\n    - struct: pub::PaymentMethodSessionRequest\n    - struct: pub::PaymentMethodSessionUpdateSavedPaymentMethod\n    - struct: pub::PaymentMethodsSessionResponse\n    - impl: impl From<PaymentMethodIntentConfirmInternal> for PaymentMethodIntentConfirm\n\n**authentication.rs**\n  Add:\n    - function: pub::to_str\n    - enum: pub::ResourceId\n    - impl: impl ResourceId\n\n**ephemeral_key.rs**\n  Remove:\n    - struct: pub::EphemeralKeyCreateRequest\n  Add:\n    - struct: pub::ClientSecretCreateRequest\n    - enum: pub::ResourceId\n\n**types.rs**\n  Modify existing code"}
