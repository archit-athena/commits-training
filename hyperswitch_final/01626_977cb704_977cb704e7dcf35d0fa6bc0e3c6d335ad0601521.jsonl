{"prompt": "feat(payments_v2): implement payments capture v2 (#6722)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for events::PaymentsCaptureResponse\n\n**payments.rs**\n  Remove:\n    - struct: pub::ConfirmIntentAmountDetailsResponse\n  Add:\n    - struct: pub::PaymentAmountDetailsResponse\n    - struct: pub::PaymentsCaptureResponse\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Add:\n    - enum: pub::PaymentIntentUpdate\n\n**payments.rs**\n  Remove:\n    - struct: pub::ConfirmIntentAmountDetailsResponse\n  Add:\n    - struct: pub::PaymentAmountDetailsResponse\n    - struct: pub::PaymentsCaptureResponse\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Add:\n    - enum: pub::PaymentIntentUpdate\n\n**router_data.rs**\n  Remove:\n    - impl: impl status\n  Add:\n    - function: private::get_attempt_status_for_db_update\n    - function: private::get_amount_capturable\n    - function: private::get_captured_amount\n    - function: private::get_payment_intent_update\n    - function: private::get_payment_attempt_update\n    - function: private::get_attempt_status_for_db_update\n    - function: private::get_amount_capturable\n    - function: private::get_captured_amount\n    - function: private::get_attempt_status_for_db_update\n    - function: private::get_amount_capturable\n    - function: private::get_captured_amount\n    - impl: impl TrackerPostUpdateObjects<\nrouter_flow_types::Capture,\nrouter_request_types::PaymentsCaptureData,\npayments::PaymentCaptureData<router_flow_types::Capture>,\n> for RouterData<\nrouter_flow_types::Capture,\nrouter_request_types::PaymentsCaptureData,\nrouter_response_types::PaymentsResponseData,\n>\n    - impl: impl TrackerPostUpdateObjects<\nrouter_flow_types::PSync,\nrouter_request_types::PaymentsSyncData,\npayments::PaymentStatusData<router_flow_types::PSync>,\n>\npayment_data: &payments::PaymentStatusData<router_flow_types::PSync>,\nlet amount_captured = self.get_captured_amount(payment_data);\nstatus: common_enums::IntentStatus::from(\nself.get_attempt_status_for_db_update(payment_data),\n),\namount_captured,\namount_captured,\npayment_data: &payments::PaymentStatusData<router_flow_types::PSync>,\nlet amount_capturable = self.get_amount_capturable(payment_data)\n\n**openapi_v2.rs**\n  Modify existing code\n\n**payments.rs**\n  Remove:\n    - struct: pub::ConfirmIntentAmountDetailsResponse\n  Add:\n    - struct: pub::PaymentAmountDetailsResponse\n    - struct: pub::PaymentsCaptureResponse\n\n**capture_flow.rs**\n  Add:\n    - function: private::get_merchant_recipient_data\n\n**operations.rs**\n  Add:\n    - mod: pub::payment_capture_v2\n\n**payment_capture_v2.rs**\n  Add:\n    - function: private::validate_status_for_operation\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::validate_request\n    - function: private::get_trackers\n    - function: private::get_customer_details\n    - function: private::make_pm_data\n    - function: private::perform_routing\n    - function: private::update_trackers\n    - struct: pub::PaymentsCapture\n    - impl: impl ValidateStatusForOperation for PaymentsCapture\n    - impl: impl Operation<F, PaymentsCaptureRequest> for &PaymentsCapture\n    - impl: impl Operation<F, PaymentsCaptureRequest> for PaymentsCapture\n    - impl: impl ValidateRequest<F, PaymentsCaptureRequest, PaymentCaptureData<F>> for PaymentsCapture\n    - impl: impl GetTracker<F, PaymentCaptureData<F>, PaymentsCaptureRequest> for PaymentsCapture\n    - impl: impl Domain<F, PaymentsCaptureRequest, PaymentCaptureData<F>> for PaymentsCapture\n    - impl: impl UpdateTracker<F, PaymentCaptureData<F>, PaymentsCaptureRequest> for PaymentsCapture\n\n**payment_get.rs**\n  Modify existing code\n\n**payment_response.rs**\n  Add:\n    - function: private::to_post_update_tracker\n    - function: private::update_tracker\n    - impl: impl Operation<F, types::PaymentsCaptureData> for PaymentResponse\n    - impl: impl PostUpdateTracker<\nF,\nhyperswitch_domain_models::payments::PaymentCaptureData<F>,\ntypes::PaymentsCaptureData,\n> for PaymentResponse\n\n**transformers.rs**\n  Add:\n    - function: private::generate_response\n\n**incoming_v2.rs**\n  Modify existing code\n\n**app.rs**\n  Modify existing code\n\n**payments.rs**\n  Remove:\n    - struct: pub::ConfirmIntentAmountDetailsResponse\n  Add:\n    - struct: pub::PaymentAmountDetailsResponse\n    - struct: pub::PaymentsCaptureResponse\n\n**types.rs**\n  Modify existing code"}
