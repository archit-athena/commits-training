{"prompt": "refactor: introduce ConnectorIntegrationNew and add default implementation for each Connector (#4989)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**lib.rs**\n  Remove:\n    - mod: pub::router_data_new\n  Add:\n    - mod: pub::router_data_v2\n\n**router_data_v2.rs**\n  Modify existing code\n\n**flow_common_types.rs**\n  Modify existing code\n\n**api.rs**\n  Remove:\n    - trait: pub::ConnectorIntegration\n  Add:\n    - function: private::get_currency_unit\n    - function: private::get_auth_header\n    - function: private::common_get_content_type\n    - function: private::build_error_response\n    - function: private::build_headers\n    - enum: pub::CurrencyUnit\n    - trait: pub::ConnectorIntegration\n    - trait: pub::ConnectorCommon\n    - trait: pub::ConnectorCommonExt\n\n**connector_integration_v2.rs**\n  Add:\n    - function: private::get_connector_integration_v2\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_http_method\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::get_request_form_data\n    - function: private::build_request_v2\n    - function: private::handle_response_v2\n    - function: private::get_error_response_v2\n    - function: private::get_5xx_error_response\n    - function: private::get_multiple_capture_sync_method\n    - function: private::get_certificate\n    - function: private::get_certificate_key\n    - trait: pub::ConnectorIntegrationAnyV2\n    - trait: pub::ConnectorIntegrationV2\n    - impl: impl ConnectorIntegrationAnyV2<Flow, ResourceCommonData, Req, Resp> for S\n\n**consts.rs**\n  Modify existing code\n\n**lib.rs**\n  Remove:\n    - mod: pub::router_data_new\n  Add:\n    - mod: pub::router_data_v2\n\n**consts.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - mod: pub::connector_integration_v2_impls\n\n**connector_integration_v2_impls.rs**\n  Add:\n    - impl: impl api::PaymentV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentAuthorizeV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentAuthorizeSessionTokenV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentSyncV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentVoidV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentApproveV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentRejectV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentCaptureV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentSessionV2 for connector::DummyConnector<T>\n    - impl: impl api::MandateSetupV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentIncrementalAuthorizationV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentsCompleteAuthorizeV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentTokenV2 for connector::DummyConnector<T>\n    - impl: impl api::ConnectorCustomerV2 for connector::DummyConnector<T>\n    - impl: impl api::PaymentsPreProcessingV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Authorize,\ntypes::PaymentFlowData,\ntypes::PaymentsAuthorizeData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PSync,\ntypes::PaymentFlowData,\ntypes::PaymentsSyncData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Void,\ntypes::PaymentFlowData,\ntypes::PaymentsCancelData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Approve,\ntypes::PaymentFlowData,\ntypes::PaymentsApproveData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Reject,\ntypes::PaymentFlowData,\ntypes::PaymentsRejectData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Capture,\ntypes::PaymentFlowData,\ntypes::PaymentsCaptureData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Session,\ntypes::PaymentFlowData,\ntypes::PaymentsSessionData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::SetupMandate,\ntypes::PaymentFlowData,\ntypes::SetupMandateRequestData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::IncrementalAuthorization,\ntypes::PaymentFlowData,\ntypes::PaymentsIncrementalAuthorizationData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::CompleteAuthorize,\ntypes::PaymentFlowData,\ntypes::CompleteAuthorizeData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PaymentMethodToken,\ntypes::PaymentFlowData,\ntypes::PaymentMethodTokenizationData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::CreateConnectorCustomer,\ntypes::PaymentFlowData,\ntypes::ConnectorCustomerData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PreProcessing,\ntypes::PaymentFlowData,\ntypes::PaymentsPreProcessingData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::AuthorizeSessionToken,\ntypes::PaymentFlowData,\ntypes::AuthorizeSessionTokenData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::RefundV2 for connector::DummyConnector<T>\n    - impl: impl api::RefundExecuteV2 for connector::DummyConnector<T>\n    - impl: impl api::RefundSyncV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Execute,\ntypes::RefundFlowData,\ntypes::RefundsData,\ntypes::RefundsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::RSync,\ntypes::RefundFlowData,\ntypes::RefundsData,\ntypes::RefundsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::ConnectorAccessTokenV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::AccessTokenAuth,\ntypes::AccessTokenFlowData,\ntypes::AccessTokenRequestData,\ntypes::AccessToken,\n> for connector::DummyConnector<T>\n    - impl: impl api::DisputeV2 for connector::DummyConnector<T>\n    - impl: impl api::AcceptDisputeV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Accept,\ntypes::DisputesFlowData,\ntypes::AcceptDisputeRequestData,\ntypes::AcceptDisputeResponse,\n> for connector::DummyConnector<T>\n    - impl: impl api::DefendDisputeV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Defend,\ntypes::DisputesFlowData,\ntypes::DefendDisputeRequestData,\ntypes::DefendDisputeResponse,\n> for connector::DummyConnector<T>\n    - impl: impl api::SubmitEvidenceV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Evidence,\ntypes::DisputesFlowData,\ntypes::SubmitEvidenceRequestData,\ntypes::SubmitEvidenceResponse,\n> for connector::DummyConnector<T>\n    - impl: impl api::FileUploadV2 for connector::DummyConnector<T>\n    - impl: impl api::UploadFileV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Upload,\ntypes::FilesFlowData,\ntypes::UploadFileRequestData,\ntypes::UploadFileResponse,\n> for connector::DummyConnector<T>\n    - impl: impl api::RetrieveFileV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Retrieve,\ntypes::FilesFlowData,\ntypes::RetrieveFileRequestData,\ntypes::RetrieveFileResponse,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutsV2 for connector::DummyConnector<T>\n    - impl: impl api::PayoutCreateV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoCreate,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutEligibilityV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoEligibility,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutFulfillV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoFulfill,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutCancelV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoCancel,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutQuoteV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoQuote,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutRecipientV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoRecipient,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PayoutRecipientAccountV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PoRecipientAccount,\ntypes::PayoutFlowData,\ntypes::PayoutsData,\ntypes::PayoutsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::ConnectorVerifyWebhookSourceV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::VerifyWebhookSource,\ntypes::WebhookSourceVerifyData,\ntypes::VerifyWebhookSourceRequestData,\ntypes::VerifyWebhookSourceResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckV2 for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckSaleV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Sale,\ntypes::FrmFlowData,\nfrm_types::FraudCheckSaleData,\nfrm_types::FraudCheckResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckCheckoutV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Checkout,\ntypes::FrmFlowData,\nfrm_types::FraudCheckCheckoutData,\nfrm_types::FraudCheckResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckTransactionV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Transaction,\ntypes::FrmFlowData,\nfrm_types::FraudCheckTransactionData,\nfrm_types::FraudCheckResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckFulfillmentV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Fulfillment,\ntypes::FrmFlowData,\nfrm_types::FraudCheckFulfillmentData,\nfrm_types::FraudCheckResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::FraudCheckRecordReturnV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::RecordReturn,\ntypes::FrmFlowData,\nfrm_types::FraudCheckRecordReturnData,\nfrm_types::FraudCheckResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::ConnectorMandateRevokeV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::MandateRevoke,\ntypes::MandateRevokeFlowData,\ntypes::MandateRevokeRequestData,\ntypes::MandateRevokeResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::ExternalAuthenticationV2 for connector::DummyConnector<T>\n    - impl: impl api::ConnectorPreAuthenticationV2 for connector::DummyConnector<T>\n    - impl: impl api::ConnectorPreAuthenticationVersionCallV2 for connector::DummyConnector<T>\n    - impl: impl api::ConnectorAuthenticationV2 for connector::DummyConnector<T>\n    - impl: impl api::ConnectorPostAuthenticationV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::Authentication,\ntypes::ExternalAuthenticationFlowData,\ntypes::authentication::ConnectorAuthenticationRequestData,\ntypes::authentication::AuthenticationResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PreAuthentication,\ntypes::ExternalAuthenticationFlowData,\ntypes::authentication::PreAuthNRequestData,\ntypes::authentication::AuthenticationResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PreAuthenticationVersionCall,\ntypes::ExternalAuthenticationFlowData,\ntypes::authentication::PreAuthNRequestData,\ntypes::authentication::AuthenticationResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PostAuthentication,\ntypes::ExternalAuthenticationFlowData,\ntypes::authentication::ConnectorPostAuthenticationRequestData,\ntypes::authentication::AuthenticationResponseData,\n> for connector::DummyConnector<T>\n    - mod: private::dummy_connector_default_impl\n\n**services.rs**\n  Modify existing code\n\n**api.rs**\n  Remove:\n    - trait: pub::ConnectorIntegration\n  Add:\n    - function: private::get_currency_unit\n    - function: private::get_auth_header\n    - function: private::common_get_content_type\n    - function: private::build_error_response\n    - function: private::build_headers\n    - enum: pub::CurrencyUnit\n    - trait: pub::ConnectorIntegration\n    - trait: pub::ConnectorCommon\n    - trait: pub::ConnectorCommonExt\n\n**types.rs**\n  Modify existing code\n\n**api.rs**\n  Remove:\n    - trait: pub::ConnectorIntegration\n  Add:\n    - function: private::get_currency_unit\n    - function: private::get_auth_header\n    - function: private::common_get_content_type\n    - function: private::build_error_response\n    - function: private::build_headers\n    - enum: pub::CurrencyUnit\n    - trait: pub::ConnectorIntegration\n    - trait: pub::ConnectorCommon\n    - trait: pub::ConnectorCommonExt\n\n**authentication.rs**\n  Modify existing code\n\n**authentication_v2.rs**\n  Add:\n    - trait: pub::ConnectorAuthenticationV2\n    - trait: pub::ConnectorPreAuthenticationV2\n    - trait: pub::ConnectorPreAuthenticationVersionCallV2\n    - trait: pub::ConnectorPostAuthenticationV2\n    - trait: pub::ExternalAuthenticationV2\n\n**disputes.rs**\n  Modify existing code\n\n**disputes_v2.rs**\n  Add:\n    - trait: pub::AcceptDisputeV2\n    - trait: pub::SubmitEvidenceV2\n    - trait: pub::DefendDisputeV2\n    - trait: pub::DisputeV2\n\n**files.rs**\n  Modify existing code\n\n**files_v2.rs**\n  Add:\n    - function: private::validate_file_upload_v2\n    - trait: pub::UploadFileV2\n    - trait: pub::RetrieveFileV2\n    - trait: pub::FileUploadV2\n\n**fraud_check.rs**\n  Modify existing code\n\n**fraud_check_v2.rs**\n  Add:\n    - trait: pub::FraudCheckSaleV2\n    - trait: pub::FraudCheckCheckoutV2\n    - trait: pub::FraudCheckTransactionV2\n    - trait: pub::FraudCheckFulfillmentV2\n    - trait: pub::FraudCheckRecordReturnV2\n    - trait: pub::FraudCheckV2\n\n**payments.rs**\n  Add:\n    - mod: pub::connector_integration_v2_impls\n\n**payments_v2.rs**\n  Add:\n    - trait: pub::PaymentAuthorizeV2\n    - trait: pub::PaymentAuthorizeSessionTokenV2\n    - trait: pub::PaymentSyncV2\n    - trait: pub::PaymentVoidV2\n    - trait: pub::PaymentApproveV2\n    - trait: pub::PaymentRejectV2\n    - trait: pub::PaymentCaptureV2\n    - trait: pub::PaymentSessionV2\n    - trait: pub::MandateSetupV2\n    - trait: pub::PaymentIncrementalAuthorizationV2\n    - trait: pub::PaymentsCompleteAuthorizeV2\n    - trait: pub::PaymentTokenV2\n    - trait: pub::ConnectorCustomerV2\n    - trait: pub::PaymentsPreProcessingV2\n    - trait: pub::PaymentV2\n\n**payouts.rs**\n  Modify existing code\n\n**payouts_v2.rs**\n  Add:\n    - trait: pub::PayoutCancelV2\n    - trait: pub::PayoutCreateV2\n    - trait: pub::PayoutEligibilityV2\n    - trait: pub::PayoutFulfillV2\n    - trait: pub::PayoutQuoteV2\n    - trait: pub::PayoutRecipientV2\n    - trait: pub::PayoutRecipientAccountV2\n    - trait: pub::PayoutsV2\n\n**refunds.rs**\n  Modify existing code\n\n**refunds_v2.rs**\n  Add:\n    - trait: pub::RefundExecuteV2\n    - trait: pub::RefundSyncV2\n    - trait: pub::RefundV2"}
