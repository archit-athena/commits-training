{"prompt": "refactor: separate DB queries and HTML creation for payout links (#4967)\n\nSigned-off-by: Chikke Srujan <chikke.srujan@Chikke-Srujan-C02FC60MMD6M.local>\nSigned-off-by: chikke srujan <121822803+srujanchikke@users.noreply.github.com>\nSigned-off-by: Chikke Srujan <chikke.srujan@Chikke-Srujan-G961M60MK7.local>\nCo-authored-by: chikke srujan <121822803+srujanchikke@users.noreply.github.com>\nCo-authored-by: Chikke Srujan <chikke.srujan@Chikke-Srujan-C02FC60MMD6M.local>\nCo-authored-by: Srujan chikke <chikke.srujan@juspay.in>\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>\nCo-authored-by: Chikke Srujan <chikke.srujan@Chikke-Srujan-G961M60MK7.local>", "response": "Files to modify:\n\n\n**admin.rs**\n  Add:\n    - struct: pub::BusinessCollectLinkConfig\n    - struct: pub::BusinessPayoutLinkConfig\n    - struct: pub::BusinessGenericLinkConfig\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentMethodCollectLinkRequest\n    - impl: impl ApiEventMetric for PaymentMethodCollectLinkRenderRequest\n    - impl: impl ApiEventMetric for PaymentMethodCollectLinkResponse\n\n**payouts.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodCollectLinkRequest\n    - struct: pub::PaymentMethodCollectLinkResponse\n    - struct: pub::PaymentMethodCollectLinkRenderRequest\n    - struct: pub::PaymentMethodCollectLinkDetails\n    - struct: pub::PaymentMethodCollectLinkStatusDetails\n\n**payouts.rs**\n  Modify existing code\n\n**enums.rs**\n  Add:\n    - enum: pub::GenericLinkType\n\n**events.rs**\n  Modify existing code\n\n**lib.rs**\n  Add:\n    - mod: pub::link_utils\n\n**link_utils.rs**\n  Add:\n    - function: private::default\n    - function: private::from_sql\n    - function: private::to_sql\n    - function: private::from_sql\n    - function: private::to_sql\n    - struct: pub::PayoutLinkData\n    - struct: pub::GenericLinkUiConfig\n    - struct: pub::GenericLinkUIConfigFormData\n    - struct: pub::EnabledPaymentMethod\n    - enum: pub::GenericLinkStatus\n    - enum: pub::PaymentMethodCollectStatus\n    - enum: pub::PayoutLinkStatus\n    - impl: impl Default for GenericLinkStatus\n    - impl: impl FromSql<Jsonb, DB> for PaymentMethodCollectStatus\n    - impl: impl ToSql<Jsonb, diesel::pg::Pg> for PaymentMethodCollectStatus\n    - impl: impl FromSql<Jsonb, DB> for PayoutLinkStatus\n    - impl: impl ToSql<Jsonb, diesel::pg::Pg> for PayoutLinkStatus\n\n**business_profile.rs**\n  Modify existing code\n\n**enums.rs**\n  Add:\n    - enum: pub::GenericLinkType\n\n**generic_link.rs**\n  Add:\n    - function: private::default\n    - function: pub::get_payment_method_collect_data\n    - function: pub::get_payout_link_data\n    - function: private::from\n    - struct: pub::GenericLink\n    - struct: pub::GenericLinkState\n    - struct: pub::GenericLinkNew\n    - struct: pub::PaymentMethodCollectLink\n    - struct: pub::PaymentMethodCollectLinkData\n    - struct: pub::PayoutLink\n    - struct: pub::GenericLinkUpdateInternal\n    - enum: pub::GenericLinkData\n    - enum: pub::PayoutLinkUpdate\n    - impl: impl Default for GenericLinkNew\n    - impl: impl GenericLinkData\n    - impl: impl From<PayoutLinkUpdate> for GenericLinkUpdateInternal\n\n**lib.rs**\n  Add:\n    - mod: pub::link_utils\n\n**merchant_account.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**query.rs**\n  Add:\n    - mod: pub::generic_link\n\n**generic_link.rs**\n  Add:\n    - function: private::default\n    - function: pub::get_payment_method_collect_data\n    - function: pub::get_payout_link_data\n    - function: private::from\n    - struct: pub::GenericLink\n    - struct: pub::GenericLinkState\n    - struct: pub::GenericLinkNew\n    - struct: pub::PaymentMethodCollectLink\n    - struct: pub::PaymentMethodCollectLinkData\n    - struct: pub::PayoutLink\n    - struct: pub::GenericLinkUpdateInternal\n    - enum: pub::GenericLinkData\n    - enum: pub::PayoutLinkUpdate\n    - impl: impl Default for GenericLinkNew\n    - impl: impl GenericLinkData\n    - impl: impl From<PayoutLinkUpdate> for GenericLinkUpdateInternal\n\n**schema.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**openapi.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**webhooks.rs**\n  Modify existing code\n\n**wrap.rs**\n  Modify existing code\n\n**secrets_transformers.rs**\n  Modify existing code\n\n**settings.rs**\n  Add:\n    - struct: pub::GenericLink\n    - struct: pub::GenericLinkEnvConfig\n    - struct: pub::GenericLinkEnvUiConfig\n\n**validations.rs**\n  Add:\n    - function: pub::validate\n    - impl: impl super::settings::GenericLinkEnvConfig\n\n**core.rs**\n  Add:\n    - mod: pub::payout_link\n\n**admin.rs**\n  Add:\n    - struct: pub::BusinessCollectLinkConfig\n    - struct: pub::BusinessPayoutLinkConfig\n    - struct: pub::BusinessGenericLinkConfig\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodCollectLinkRequest\n    - struct: pub::PaymentMethodCollectLinkResponse\n    - struct: pub::PaymentMethodCollectLinkRenderRequest\n    - struct: pub::PaymentMethodCollectLinkDetails\n    - struct: pub::PaymentMethodCollectLinkStatusDetails\n\n**validator.rs**\n  Add:\n    - function: pub::validate_request_and_initiate_payment_method_collect_link\n\n**helpers.rs**\n  Add:\n    - function: pub::filter_mca_based_on_connector_type\n\n**transformers.rs**\n  Modify existing code\n\n**payout_link.rs**\n  Add:\n    - function: pub::initiate_payout_link\n    - function: pub::filter_payout_methods\n\n**payouts.rs**\n  Modify existing code\n\n**helpers.rs**\n  Add:\n    - function: pub::filter_mca_based_on_connector_type\n\n**retry.rs**\n  Modify existing code\n\n**validator.rs**\n  Add:\n    - function: pub::validate_request_and_initiate_payment_method_collect_link\n\n**routing.rs**\n  Modify existing code\n\n**helpers.rs**\n  Add:\n    - function: pub::filter_mca_based_on_connector_type\n\n**db.rs**\n  Add:\n    - mod: pub::generic_link\n\n**generic_link.rs**\n  Add:\n    - function: private::default\n    - function: pub::get_payment_method_collect_data\n    - function: pub::get_payout_link_data\n    - function: private::from\n    - struct: pub::GenericLink\n    - struct: pub::GenericLinkState\n    - struct: pub::GenericLinkNew\n    - struct: pub::PaymentMethodCollectLink\n    - struct: pub::PaymentMethodCollectLinkData\n    - struct: pub::PayoutLink\n    - struct: pub::GenericLinkUpdateInternal\n    - enum: pub::GenericLinkData\n    - enum: pub::PayoutLinkUpdate\n    - impl: impl Default for GenericLinkNew\n    - impl: impl GenericLinkData\n    - impl: impl From<PayoutLinkUpdate> for GenericLinkUpdateInternal\n\n**kafka_store.rs**\n  Add:\n    - function: private::find_generic_link_by_link_id\n    - function: private::find_pm_collect_link_by_link_id\n    - function: private::find_payout_link_by_link_id\n    - function: private::insert_generic_link\n    - function: private::insert_pm_collect_link\n    - function: private::insert_payout_link\n    - function: private::update_payout_link\n    - impl: impl GenericLinkInterface for KafkaStore\n\n**api_logs.rs**\n  Modify existing code\n\n**lib.rs**\n  Add:\n    - mod: pub::link_utils\n\n**routes.rs**\n  Add:\n    - mod: pub::payout_link\n\n**app.rs**\n  Add:\n    - function: pub::server\n    - struct: pub::PayoutLink\n    - impl: impl PayoutLink\n\n**lock_utils.rs**\n  Modify existing code\n\n**request.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodCollectLinkRequest\n    - struct: pub::PaymentMethodCollectLinkResponse\n    - struct: pub::PaymentMethodCollectLinkRenderRequest\n    - struct: pub::PaymentMethodCollectLinkDetails\n    - struct: pub::PaymentMethodCollectLinkStatusDetails\n\n**payout_link.rs**\n  Add:\n    - function: pub::initiate_payout_link\n    - function: pub::filter_payout_methods\n\n**payouts.rs**\n  Modify existing code\n\n**api.rs**\n  Add:\n    - function: private::fmt\n    - struct: pub::GenericLinkFormData\n    - struct: pub::GenericExpiredLinkData\n    - struct: pub::GenericLinkStatusData\n    - mod: pub::generic_link_response\n\n**generic_link_response.rs**\n  Add:\n    - function: pub::build_generic_link_html\n    - function: pub::build_generic_expired_link_html\n    - function: pub::build_payout_link_html\n    - function: pub::build_pm_collect_link_html\n    - function: pub::build_payout_link_status_html\n    - function: pub::build_pm_collect_link_status_html\n\n**authentication.rs**\n  Add:\n    - function: private::get_client_secret\n    - impl: impl ClientSecretFetch for payouts::PayoutCreateRequest\n\n**admin.rs**\n  Add:\n    - struct: pub::BusinessCollectLinkConfig\n    - struct: pub::BusinessPayoutLinkConfig\n    - struct: pub::BusinessGenericLinkConfig\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodCollectLinkRequest\n    - struct: pub::PaymentMethodCollectLinkResponse\n    - struct: pub::PaymentMethodCollectLinkRenderRequest\n    - struct: pub::PaymentMethodCollectLinkDetails\n    - struct: pub::PaymentMethodCollectLinkStatusDetails\n\n**merchant_account.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**storage.rs**\n  Add:\n    - mod: pub::generic_link\n\n**generic_link.rs**\n  Add:\n    - function: private::default\n    - function: pub::get_payment_method_collect_data\n    - function: pub::get_payout_link_data\n    - function: private::from\n    - struct: pub::GenericLink\n    - struct: pub::GenericLinkState\n    - struct: pub::GenericLinkNew\n    - struct: pub::PaymentMethodCollectLink\n    - struct: pub::PaymentMethodCollectLinkData\n    - struct: pub::PayoutLink\n    - struct: pub::GenericLinkUpdateInternal\n    - enum: pub::GenericLinkData\n    - enum: pub::PayoutLinkUpdate\n    - impl: impl Default for GenericLinkNew\n    - impl: impl GenericLinkData\n    - impl: impl From<PayoutLinkUpdate> for GenericLinkUpdateInternal\n\n**transformers.rs**\n  Modify existing code\n\n**outgoing_webhook_retry.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code"}
