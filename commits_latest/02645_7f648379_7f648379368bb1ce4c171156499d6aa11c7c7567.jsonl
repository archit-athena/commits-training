{"prompt": "feat(router): Add support for confirm-intent external vault proxy flow (#8923)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**transformers.rs**\n  Modify existing code\n\n**default_implementations.rs**\n  Add:\n    - impl: impl ExternalVaultProxyPaymentsCreateV1 for connectors::DummyConnector<T>\n    - impl: impl ConnectorIntegration<ExternalVaultProxy, ExternalVaultProxyPaymentsData, PaymentsResponseData> for connectors::DummyConnector<T>\n\n**default_implementations_v2.rs**\n  Modify existing code\n\n**utils.rs**\n  Add:\n    - function: private::get_split_payment_data\n    - impl: impl SplitPaymentData for ExternalVaultProxyPaymentsData\n\n**payment_method_data.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::ExternalVaultCard\n    - enum: pub::ExternalVaultPaymentMethodData\n    - impl: impl From<api_models::payments::ProxyPaymentMethodData> for ExternalVaultPaymentMethodData\n    - impl: impl From<api_models::payments::ProxyCardData> for ExternalVaultCard\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::external_vault_proxy_create_domain_model\n\n**router_data.rs**\n  Add:\n    - function: private::get_payment_intent_update\n    - function: private::get_payment_attempt_update\n    - function: private::get_attempt_status_for_db_update\n    - function: private::get_amount_capturable\n    - function: private::get_captured_amount\n    - impl: impl TrackerPostUpdateObjects<\nrouter_flow_types::ExternalVaultProxy,\nrouter_request_types::ExternalVaultProxyPaymentsData,\npayments::PaymentConfirmData<router_flow_types::ExternalVaultProxy>,\n> for RouterData<\nrouter_flow_types::ExternalVaultProxy,\nrouter_request_types::ExternalVaultProxyPaymentsData,\nrouter_response_types::PaymentsResponseData,\n>\n\n**router_data_v2.rs**\n  Modify existing code\n\n**flow_common_types.rs**\n  Add:\n    - struct: pub::ExternalVaultProxyFlowData\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**router_request_types.rs**\n  Add:\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - struct: pub::ExternalVaultProxyPaymentsData\n    - impl: impl TryFrom<\n&RouterData<\nflows::ExternalVaultProxy,\nExternalVaultProxyPaymentsData,\nresponse_types::PaymentsResponseData,\n>,\n> for ConnectorCustomerData\n    - impl: impl TryFrom<ExternalVaultProxyPaymentsData> for PaymentMethodTokenizationData\n    - impl: impl TryFrom<ExternalVaultProxyPaymentsData> for CreateOrderRequestData\n\n**types.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**payments_v2.rs**\n  Add:\n    - trait: pub::ExternalVaultProxyPaymentsCreate\n\n**conversion_impls.rs**\n  Add:\n    - function: private::from_old_router_data\n    - function: private::to_old_router_data\n    - impl: impl RouterDataConversion<T, Req, Resp> for ExternalVaultProxyFlowData\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**flows.rs**\n  Add:\n    - mod: pub::external_proxy_flow\n\n**authorize_flow.rs**\n  Modify existing code\n\n**external_proxy_flow.rs**\n  Add:\n    - function: private::construct_router_data\n    - function: private::decide_flows\n    - function: private::add_access_token\n    - function: private::add_session_token\n    - function: private::add_payment_method_token\n    - function: private::preprocessing_steps\n    - function: private::postprocessing_steps\n    - function: private::create_connector_customer\n    - function: private::build_flow_specific_connector_request\n    - function: private::create_order_at_connector\n    - function: private::update_router_data_with_create_order_response\n    - function: private::call_unified_connector_service\n    - impl: impl ConstructFlowSpecificData<\napi::ExternalVaultProxy,\ntypes::ExternalVaultProxyPaymentsData,\ntypes::PaymentsResponseData,\n> for PaymentConfirmData<api::ExternalVaultProxy>\n    - impl: impl Feature<api::ExternalVaultProxy, types::ExternalVaultProxyPaymentsData> for types::ExternalVaultProxyPaymentsRouterData\n\n**operations.rs**\n  Add:\n    - mod: pub::external_vault_proxy_payment_intent\n\n**external_vault_proxy_payment_intent.rs**\n  Add:\n    - function: private::validate_status_for_operation\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::to_validate_request\n    - function: private::to_get_tracker\n    - function: private::to_domain\n    - function: private::to_update_tracker\n    - function: private::validate_request\n    - function: private::get_trackers\n    - function: private::get_customer_details\n    - function: private::make_pm_data\n    - function: private::populate_payment_data\n    - function: private::perform_routing\n    - function: private::update_trackers\n    - function: private::update_tracker\n    - struct: pub::ExternalVaultProxyPaymentIntent\n    - impl: impl ValidateStatusForOperation for ExternalVaultProxyPaymentIntent\n    - impl: impl Operation<F, ExternalVaultProxyPaymentsRequest> for &ExternalVaultProxyPaymentIntent\n    - impl: impl Operation<F, ExternalVaultProxyPaymentsRequest> for ExternalVaultProxyPaymentIntent\n    - impl: impl ValidateRequest<F, ExternalVaultProxyPaymentsRequest, PaymentConfirmData<F>> for ExternalVaultProxyPaymentIntent\n    - impl: impl GetTracker<F, PaymentConfirmData<F>, ExternalVaultProxyPaymentsRequest> for ExternalVaultProxyPaymentIntent\n    - impl: impl Domain<F, ExternalVaultProxyPaymentsRequest, PaymentConfirmData<F>> for ExternalVaultProxyPaymentIntent\n    - impl: impl UpdateTracker<F, PaymentConfirmData<F>, ExternalVaultProxyPaymentsRequest> for ExternalVaultProxyPaymentIntent\n    - impl: impl PostUpdateTracker<F, PaymentConfirmData<F>, types::PaymentsAuthorizeData> for ExternalVaultProxyPaymentIntent\n\n**payment_confirm_intent.rs**\n  Modify existing code\n\n**payment_response.rs**\n  Add:\n    - function: private::to_post_update_tracker\n    - function: private::to_post_update_tracker\n    - function: private::update_tracker\n    - impl: impl Operation<\nhyperswitch_domain_models::router_flow_types::ExternalVaultProxy,\nhyperswitch_domain_models::router_request_types::ExternalVaultProxyPaymentsData,\n> for PaymentResponse\n    - impl: impl Operation<\nhyperswitch_domain_models::router_flow_types::ExternalVaultProxy,\nhyperswitch_domain_models::router_request_types::ExternalVaultProxyPaymentsData,\n> for &PaymentResponse\n    - impl: impl PostUpdateTracker<\nhyperswitch_domain_models::router_flow_types::ExternalVaultProxy,\nPaymentConfirmData<hyperswitch_domain_models::router_flow_types::ExternalVaultProxy>,\nhyperswitch_domain_models::router_request_types::ExternalVaultProxyPaymentsData,\n> for PaymentResponse\n\n**proxy_payments_intent.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**unified_connector_service.rs**\n  Add:\n    - function: pub::build_unified_connector_service_payment_method_for_external_proxy\n\n**transformers.rs**\n  Modify existing code\n\n**app.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData\n\n**api.rs**\n  Add:\n    - impl: impl Authenticate for api_models::payments::ExternalVaultProxyPaymentsRequest\n\n**types.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::ProxyPaymentMethodDataRequest\n    - struct: pub::ProxyCardData\n    - struct: pub::ExternalVaultProxyPaymentsRequest\n    - enum: pub::ProxyPaymentMethodData"}
