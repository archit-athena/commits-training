{"prompt": "feat(analytics): Add v2 payment analytics (payment-intents analytics) (#5150)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**clickhouse.rs**\n  Add:\n    - function: private::try_into\n    - function: private::try_into\n    - impl: impl super::payment_intents::filters::PaymentIntentFilterAnalytics for ClickhouseClient\n    - impl: impl super::payment_intents::metrics::PaymentIntentMetricAnalytics for ClickhouseClient\n    - impl: impl TryInto<PaymentIntentMetricRow> for serde_json::Value\n    - impl: impl TryInto<PaymentIntentFilterRow> for serde_json::Value\n\n**core.rs**\n  Modify existing code\n\n**lib.rs**\n  Add:\n    - function: pub::get_payment_intent_metrics\n    - mod: pub::payment_intents\n\n**payment_intents.rs**\n  Add:\n    - trait: pub::PaymentIntentAnalytics\n    - mod: pub::accumulator\n    - mod: private::core\n    - mod: pub::filters\n    - mod: pub::metrics\n    - mod: pub::types\n\n**accumulator.rs**\n  Add:\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: pub::collect\n    - struct: pub::PaymentIntentMetricsAccumulator\n    - struct: pub::ErrorDistributionRow\n    - struct: pub::ErrorDistributionAccumulator\n    - struct: pub::CountAccumulator\n    - struct: pub::SumAccumulator\n    - trait: pub::PaymentIntentMetricAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for CountAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for SumAccumulator\n    - impl: impl PaymentIntentMetricsAccumulator\n\n**core.rs**\n  Modify existing code\n\n**filters.rs**\n  Add:\n    - function: pub::get_payment_intent_filter_for_dimension\n    - struct: pub::PaymentIntentFilterRow\n    - trait: pub::PaymentIntentFilterAnalytics\n\n**metrics.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentIntentMetricRow\n    - trait: pub::PaymentIntentMetricAnalytics\n    - trait: pub::PaymentIntentMetric\n    - impl: impl PaymentIntentMetric<T> for PaymentIntentMetrics\n    - mod: private::payment_intent_count\n    - mod: private::smart_retried_amount\n    - mod: private::successful_smart_retries\n    - mod: private::total_smart_retries\n\n**payment_intent_count.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentIntentCount\n    - impl: impl super::PaymentIntentMetric<T> for PaymentIntentCount\n\n**smart_retried_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SmartRetriedAmount\n    - impl: impl super::PaymentIntentMetric<T> for SmartRetriedAmount\n\n**successful_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SuccessfulSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for SuccessfulSmartRetries\n\n**total_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::TotalSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for TotalSmartRetries\n\n**types.rs**\n  Add:\n    - function: private::set_filter_clause\n    - impl: impl QueryFilter<T> for PaymentIntentFilters\n\n**retries_count.rs**\n  Modify existing code\n\n**query.rs**\n  Modify existing code\n\n**sqlx.rs**\n  Add:\n    - function: private::from_row\n    - function: private::from_row\n    - impl: impl super::payment_intents::filters::PaymentIntentFilterAnalytics for SqlxClient\n    - impl: impl super::payment_intents::metrics::PaymentIntentMetricAnalytics for SqlxClient\n    - impl: impl FromRow<'a, PgRow> for super::payment_intents::metrics::PaymentIntentMetricRow\n    - impl: impl FromRow<'a, PgRow> for super::payment_intents::filters::PaymentIntentFilterRow\n\n**types.rs**\n  Add:\n    - function: private::set_filter_clause\n    - impl: impl QueryFilter<T> for PaymentIntentFilters\n\n**utils.rs**\n  Add:\n    - function: pub::get_payment_intent_dimensions\n    - function: pub::get_payment_intent_metrics_info\n\n**analytics.rs**\n  Add:\n    - struct: pub::GetPaymentIntentMetricRequest\n    - struct: pub::GetPaymentIntentFiltersRequest\n    - struct: pub::PaymentIntentFiltersResponse\n    - struct: pub::PaymentIntentFilterValue\n    - mod: pub::payment_intents\n\n**payment_intents.rs**\n  Add:\n    - trait: pub::PaymentIntentAnalytics\n    - mod: pub::accumulator\n    - mod: private::core\n    - mod: pub::filters\n    - mod: pub::metrics\n    - mod: pub::types\n\n**events.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for GetPaymentIntentFiltersRequest\n    - impl: impl ApiEventMetric for GetPaymentIntentMetricRequest\n    - impl: impl ApiEventMetric for PaymentIntentFiltersResponse\n\n**events.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for GetPaymentIntentFiltersRequest\n    - impl: impl ApiEventMetric for GetPaymentIntentMetricRequest\n    - impl: impl ApiEventMetric for PaymentIntentFiltersResponse\n\n**analytics.rs**\n  Add:\n    - struct: pub::GetPaymentIntentMetricRequest\n    - struct: pub::GetPaymentIntentFiltersRequest\n    - struct: pub::PaymentIntentFiltersResponse\n    - struct: pub::PaymentIntentFilterValue\n    - mod: pub::payment_intents"}
