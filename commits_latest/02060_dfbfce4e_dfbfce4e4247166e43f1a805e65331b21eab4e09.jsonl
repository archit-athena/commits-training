{"prompt": "refactor(customers_v2): address panics and some bugs in customers v2 endpoints (#6836)", "response": "Files to modify:\n\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**ephemeral_key.rs**\n  Add:\n    - function: private::get_api_event_type\n    - struct: pub::EphemeralKeyCreateRequest\n    - impl: impl common_utils::events::ApiEventMetric for EphemeralKeyCreateRequest\n\n**customer.rs**\n  Remove:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for CustomerId\n    - impl: impl ApiEventMetric for CustomerUpdateRequest\n\n**payment_methods.rs**\n  Remove:\n    - function: private::from\n    - impl: impl From<PaymentMethodMigrationResponseType> for PaymentMethodMigrationResponse\n\n**payments.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**id_type.rs**\n  Remove:\n    - mod: private::global_id\n  Add:\n    - mod: private::global_id\n\n**customer.rs**\n  Remove:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for CustomerId\n    - impl: impl ApiEventMetric for CustomerUpdateRequest\n\n**global_id.rs**\n  Remove:\n    - mod: pub::payment\n    - mod: pub::payment_methods\n    - mod: pub::refunds\n  Add:\n    - mod: pub::customer\n    - mod: pub::payment\n    - mod: pub::payment_methods\n    - mod: pub::refunds\n\n**customer.rs**\n  Remove:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for CustomerId\n    - impl: impl ApiEventMetric for CustomerUpdateRequest\n\n**payment.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**kv.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**mandate.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**customer.rs**\n  Remove:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for CustomerId\n    - impl: impl ApiEventMetric for CustomerUpdateRequest\n\n**payment_methods.rs**\n  Remove:\n    - function: private::from\n    - impl: impl From<PaymentMethodMigrationResponseType> for PaymentMethodMigrationResponse\n\n**payments.rs**\n  Modify existing code\n\n**openapi.rs**\n  Modify existing code\n\n**openapi_v2.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**mandate.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Remove:\n    - function: private::from\n    - impl: impl From<PaymentMethodMigrationResponseType> for PaymentMethodMigrationResponse\n\n**cards.rs**\n  Modify existing code\n\n**network_tokenization.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**payment_confirm_intent.rs**\n  Modify existing code\n\n**payment_create_intent.rs**\n  Modify existing code\n\n**payment_get.rs**\n  Modify existing code\n\n**payment_session_intent.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**kafka_store.rs**\n  Add:\n    - function: private::find_mandate_by_global_customer_id\n\n**mandate.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**app.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**ephemeral_key.rs**\n  Add:\n    - function: private::get_api_event_type\n    - struct: pub::EphemeralKeyCreateRequest\n    - impl: impl common_utils::events::ApiEventMetric for EphemeralKeyCreateRequest\n\n**payment_methods.rs**\n  Remove:\n    - function: private::from\n    - impl: impl From<PaymentMethodMigrationResponseType> for PaymentMethodMigrationResponse\n\n**payments.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::new\n    - function: pub::get_merchant_reference_id\n    - function: pub::new_customer_id_struct\n    - function: pub::get_merchant_reference_id\n    - function: pub::get_global_id\n    - function: pub::new\n    - struct: pub::CustomerId\n    - struct: pub::GlobalId\n    - struct: pub::CustomerId\n    - struct: pub::UpdateCustomerId\n    - impl: impl CustomerId\n    - impl: impl GlobalId\n    - impl: impl CustomerId\n    - impl: impl UpdateCustomerId\n  Add:\n    - struct: pub::CustomerUpdateRequestInternal\n    - struct: pub::CustomerUpdateRequestInternal\n\n**lib.rs**\n  Modify existing code"}
