{"prompt": "feat(payments_v2): implement create and confirm intent flow (#7106)", "response": "Files to modify:\n\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsRequest\n    - impl: impl ApiEventMetric for PaymentsResponse\n\n**payments.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::PaymentsRequest\n    - struct: pub::PaymentsResponse\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl From<&PaymentsRequest> for PaymentsCreateIntentRequest\n    - impl: impl From<&PaymentsRequest> for PaymentsConfirmIntentRequest\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::get_connector_mandate_request_reference_id\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl ConnectorTokenDetails\n\n**schema_v2.rs**\n  Modify existing code\n\n**consts.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::get_connector_mandate_request_reference_id\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl ConnectorTokenDetails\n\n**router_data.rs**\n  Add:\n    - function: private::get_payment_intent_update\n    - function: private::get_payment_attempt_update\n    - function: private::get_attempt_status_for_db_update\n    - function: private::get_amount_capturable\n    - function: private::get_captured_amount\n    - impl: impl TrackerPostUpdateObjects<\nrouter_flow_types::SetupMandate,\nrouter_request_types::SetupMandateRequestData,\npayments::PaymentConfirmData<router_flow_types::SetupMandate>,\n> for RouterData<\nrouter_flow_types::SetupMandate,\nrouter_request_types::SetupMandateRequestData,\nrouter_response_types::PaymentsResponseData,\n>\n\n**router_response_types.rs**\n  Add:\n    - function: pub::get_updated_connector_token_details\n\n**openapi_v2.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::PaymentsRequest\n    - struct: pub::PaymentsResponse\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl From<&PaymentsRequest> for PaymentsCreateIntentRequest\n    - impl: impl From<&PaymentsRequest> for PaymentsConfirmIntentRequest\n\n**consts.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::PaymentsRequest\n    - struct: pub::PaymentsResponse\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl From<&PaymentsRequest> for PaymentsCreateIntentRequest\n    - impl: impl From<&PaymentsRequest> for PaymentsConfirmIntentRequest\n\n**setup_mandate_flow.rs**\n  Add:\n    - function: private::get_merchant_recipient_data\n\n**helpers.rs**\n  Modify existing code\n\n**payment_confirm.rs**\n  Modify existing code\n\n**payment_create.rs**\n  Modify existing code\n\n**payment_response.rs**\n  Add:\n    - function: private::to_post_update_tracker\n    - function: private::to_post_update_tracker\n    - function: private::update_tracker\n    - impl: impl Operation<F, types::SetupMandateRequestData> for &PaymentResponse\n    - impl: impl Operation<F, types::SetupMandateRequestData> for PaymentResponse\n    - impl: impl PostUpdateTracker<F, PaymentConfirmData<F>, types::SetupMandateRequestData> for PaymentResponse\n\n**transformers.rs**\n  Add:\n    - function: pub::construct_payment_router_data_for_setup_mandate\n    - function: private::foreign_from\n    - impl: impl ForeignFrom<diesel_models::ConnectorTokenDetails> for Option<api_models::payments::ConnectorTokenDetails>\n\n**utils.rs**\n  Modify existing code\n\n**app.rs**\n  Modify existing code\n\n**lock_utils.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::PaymentsRequest\n    - struct: pub::PaymentsResponse\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl From<&PaymentsRequest> for PaymentsCreateIntentRequest\n    - impl: impl From<&PaymentsRequest> for PaymentsConfirmIntentRequest\n\n**api.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - struct: pub::PaymentsRequest\n    - struct: pub::PaymentsResponse\n    - struct: pub::ConnectorTokenDetails\n    - impl: impl From<&PaymentsRequest> for PaymentsCreateIntentRequest\n    - impl: impl From<&PaymentsRequest> for PaymentsConfirmIntentRequest\n\n**types.rs**\n  Modify existing code"}
