{"prompt": "refactor(payment_attempt_v2): add payment attempt v2 domain and diesel models (#6027)\n\nCo-authored-by: hrithikesh026 <hrithikesh.vm@juspay.in>\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**kv.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_intent.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**schema_v2.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_intent.rs**\n  Modify existing code\n\n**router_request_types.rs**\n  Add:\n    - function: private::from\n    - impl: impl From<(\n&RequestSurchargeDetails,\n&payments::payment_attempt::PaymentAttempt,\n)> for SurchargeDetails\n\n**fraud_check.rs**\n  Modify existing code\n\n**fraud_check_post.rs**\n  Modify existing code\n\n**cards.rs**\n  Modify existing code\n\n**surcharge_decision_configs.rs**\n  Add:\n    - function: pub::perform_surcharge_decision_management_for_payment_method_list\n    - function: private::get_surcharge_details_from_surcharge_output\n\n**payments.rs**\n  Modify existing code\n\n**authorize_flow.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**payment_create.rs**\n  Modify existing code\n\n**payment_response.rs**\n  Modify existing code\n\n**retry.rs**\n  Add:\n    - function: pub::modify_trackers\n\n**routing.rs**\n  Modify existing code\n\n**transformers.rs**\n  Remove:\n    - function: private::try_from\n    - impl: impl TryFrom<PaymentAdditionalData<'_, F>> for types::PaymentsSyncData\n  Add:\n    - function: private::try_from\n    - impl: impl TryFrom<PaymentAdditionalData<'_, F>> for types::PaymentsSyncData\n\n**types.rs**\n  Add:\n    - function: private::foreign_try_from\n    - impl: impl ForeignTryFrom<(&SurchargeDetails, &PaymentAttempt)> for SurchargeDetailsResponse\n\n**sample_data.rs**\n  Modify existing code\n\n**utils.rs**\n  Add:\n    - function: pub::get_connector_request_reference_id\n\n**kafka_store.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**app.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_attempt_event.rs**\n  Add:\n    - function: pub::from_storage\n    - impl: impl KafkaPaymentAttemptEvent<'a>\n\n**types.rs**\n  Add:\n    - function: private::foreign_try_from\n    - impl: impl ForeignTryFrom<(&SurchargeDetails, &PaymentAttempt)> for SurchargeDetailsResponse\n\n**api.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**transformers.rs**\n  Remove:\n    - function: private::try_from\n    - impl: impl TryFrom<PaymentAdditionalData<'_, F>> for types::PaymentsSyncData\n  Add:\n    - function: private::try_from\n    - impl: impl TryFrom<PaymentAdditionalData<'_, F>> for types::PaymentsSyncData\n\n**utils.rs**\n  Add:\n    - function: pub::get_connector_request_reference_id\n\n**lib.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Add:\n    - function: pub::calculate_net_amount\n    - function: pub::get_or_calculate_net_amount\n    - function: pub::populate_derived_fields\n    - function: pub::populate_derived_fields\n    - function: pub::apply_changeset\n    - function: private::from\n    - struct: pub::PaymentAttemptNew\n    - struct: pub::PaymentAttemptUpdateInternal\n    - enum: pub::PaymentAttemptUpdate\n    - impl: impl PaymentAttemptNew\n    - impl: impl PaymentAttemptUpdateInternal\n    - impl: impl PaymentAttemptUpdate\n    - impl: impl From<PaymentAttemptUpdate> for PaymentAttemptUpdateInternal\n\n**payment_intent.rs**\n  Modify existing code"}
