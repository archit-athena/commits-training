{"prompt": "feat(router): Save payment method on payments confirm (V2) (#8090)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**payment.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodListResponseForSession\n\n**payments.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_method_data.rs**\n  Add:\n    - function: private::from\n    - function: private::from\n    - impl: impl From<(\npayment_methods::CardDetail,\nSecret<String>,\nOption<Secret<String>>,\n)> for Card\n    - impl: impl From<Card> for payment_methods::CardDetail\n\n**payments.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**openapi_v2.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodListResponseForSession\n\n**cards.rs**\n  Modify existing code\n\n**transformers.rs**\n  Remove:\n    - impl: impl transformers::ForeignTryFrom<domain::PaymentMethod> for api::CustomerPaymentMethod\n  Add:\n    - function: private::foreign_try_from\n    - impl: impl transformers::ForeignTryFrom<(domain::PaymentMethod, String)> for api::CustomerPaymentMethodResponseItem\n    - impl: impl transformers::ForeignTryFrom<domain::PaymentMethod> for PaymentMethodResponseItem\n\n**utils.rs**\n  Add:\n    - function: pub::retrieve_payment_token_data\n    - function: pub::delete_payment_token_data\n\n**vault.rs**\n  Add:\n    - function: pub::retrieve_payment_method_from_vault_using_payment_token\n    - function: pub::delete_payment_token\n\n**payments.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**operations.rs**\n  Add:\n    - function: private::create_or_fetch_payment_method\n\n**payment_confirm_intent.rs**\n  Add:\n    - function: private::create_or_fetch_payment_method\n\n**payment_response.rs**\n  Modify existing code\n\n**proxy_payments_intent.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodListResponseForSession\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodListResponseForSession\n\n**payment_methods.rs**\n  Add:\n    - struct: pub::PaymentMethodListResponseForSession\n\n**payment_method.rs**\n  Modify existing code\n\n**revenue_recovery.rs**\n  Modify existing code"}
