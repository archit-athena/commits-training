{"prompt": "refactor(merchant_id): create domain type for `merchant_id` (#5408)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>\nCo-authored-by: Sanchith Hegde <22217505+SanchithHegde@users.noreply.github.com>", "response": "Files to modify:\n\n\n**core.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**active_payments.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**api_count.rs**\n  Modify existing code\n\n**latency.rs**\n  Modify existing code\n\n**status_code_count.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**authentication_attempt_count.rs**\n  Modify existing code\n\n**authentication_success_count.rs**\n  Modify existing code\n\n**challenge_attempt_count.rs**\n  Modify existing code\n\n**challenge_flow_count.rs**\n  Modify existing code\n\n**challenge_success_count.rs**\n  Modify existing code\n\n**frictionless_flow_count.rs**\n  Modify existing code\n\n**frictionless_success_count.rs**\n  Modify existing code\n\n**three_ds_sdk_count.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**dispute_status_metric.rs**\n  Modify existing code\n\n**total_amount_disputed.rs**\n  Modify existing code\n\n**total_dispute_lost_amount.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**frm_blocked_rate.rs**\n  Modify existing code\n\n**frm_triggered_attempts.rs**\n  Modify existing code\n\n**lib.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**payment_intent_count.rs**\n  Modify existing code\n\n**smart_retried_amount.rs**\n  Modify existing code\n\n**successful_smart_retries.rs**\n  Modify existing code\n\n**total_smart_retries.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**distribution.rs**\n  Modify existing code\n\n**payment_error_message.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**avg_ticket_size.rs**\n  Modify existing code\n\n**connector_success_rate.rs**\n  Modify existing code\n\n**payment_count.rs**\n  Modify existing code\n\n**payment_processed_amount.rs**\n  Modify existing code\n\n**payment_success_count.rs**\n  Modify existing code\n\n**retries_count.rs**\n  Modify existing code\n\n**success_rate.rs**\n  Modify existing code\n\n**query.rs**\n  Add:\n    - function: private::to_sql\n    - impl: impl ToSql<T> for &common_utils::id_type::MerchantId\n\n**core.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Modify existing code\n\n**refund_count.rs**\n  Modify existing code\n\n**refund_processed_amount.rs**\n  Modify existing code\n\n**refund_success_count.rs**\n  Modify existing code\n\n**refund_success_rate.rs**\n  Modify existing code\n\n**core.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**search.rs**\n  Modify existing code\n\n**admin.rs**\n  Modify existing code\n\n**analytics.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**apple_pay_certificates_migration.rs**\n  Modify existing code\n\n**connector_onboarding.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**payment_methods.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**recon.rs**\n  Modify existing code\n\n**refunds.rs**\n  Modify existing code\n\n**routing.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**verifications.rs**\n  Modify existing code\n\n**webhook_events.rs**\n  Modify existing code\n\n**webhooks.rs**\n  Modify existing code\n\n**enums.rs**\n  Add:\n    - enum: pub::PayoutRetryType\n\n**access_token.rs**\n  Remove:\n    - impl: impl format!(\"access_token_{merchant_id}_{merchant_connector_id_or_connector_name}\")\n\n**events.rs**\n  Modify existing code\n\n**merchant.rs**\n  Add:\n    - function: private::fmt\n    - function: private::from\n    - function: pub::get_merchant_id_not_found\n    - function: pub::get_internal_user_merchant_id\n    - function: pub::new_from_unix_timestamp\n    - function: pub::get_irrelevant_merchant_id\n    - function: private::from\n    - function: pub::get_step_up_enabled_key\n    - function: pub::get_max_auto_retries_enabled\n    - function: pub::get_requires_cvv_key\n    - function: pub::get_pm_filters_cgraph_key\n    - function: pub::get_blocklist_guard_key\n    - function: pub::get_merchant_fingerprint_secret_key\n    - function: pub::get_surcharge_dsk_key\n    - function: pub::get_dsl_config\n    - function: pub::get_creds_identifier_key\n    - function: pub::get_poll_id\n    - function: pub::get_access_token_key\n    - function: pub::get_skip_saving_wallet_at_connector_key\n    - function: pub::get_payment_config_routing_id\n    - function: pub::get_payment_method_surcharge_routing_id\n    - function: pub::get_webhook_config_disabled_events_key\n    - function: pub::get_should_call_gsm_payout_key\n    - function: pub::get_should_call_gsm_key\n    - function: pub::get_max_auto_single_connector_payout_retries_enabled\n    - impl: impl Display for MerchantId\n    - impl: impl From<MerchantId> for router_env::opentelemetry::Value\n    - impl: impl From<MerchantId> for keymanager::Identifier\n    - impl: impl MerchantId\n\n**keymanager.rs**\n  Modify existing code\n\n**address.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**authentication.rs**\n  Modify existing code\n\n**authorization.rs**\n  Modify existing code\n\n**blocklist.rs**\n  Modify existing code\n\n**blocklist_fingerprint.rs**\n  Modify existing code\n\n**blocklist_lookup.rs**\n  Modify existing code\n\n**business_profile.rs**\n  Modify existing code\n\n**capture.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**dispute.rs**\n  Modify existing code\n\n**ephemeral_key.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**file.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**generic_link.rs**\n  Modify existing code\n\n**locker_mock_up.rs**\n  Modify existing code\n\n**mandate.rs**\n  Modify existing code\n\n**merchant_account.rs**\n  Add:\n    - function: pub::get_id\n    - impl: impl MerchantAccount\n\n**merchant_connector_account.rs**\n  Modify existing code\n\n**merchant_key_store.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**payout_attempt.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**address.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**authentication.rs**\n  Modify existing code\n\n**authorization.rs**\n  Modify existing code\n\n**blocklist.rs**\n  Modify existing code\n\n**blocklist_fingerprint.rs**\n  Modify existing code\n\n**blocklist_lookup.rs**\n  Modify existing code\n\n**business_profile.rs**\n  Modify existing code\n\n**capture.rs**\n  Modify existing code\n\n**connector_response.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**dashboard_metadata.rs**\n  Modify existing code\n\n**dispute.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**file.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**mandate.rs**\n  Modify existing code\n\n**merchant_account.rs**\n  Add:\n    - function: pub::get_id\n    - impl: impl MerchantAccount\n\n**merchant_connector_account.rs**\n  Modify existing code\n\n**merchant_key_store.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**payout_attempt.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**refund.rs**\n  Modify existing code\n\n**role.rs**\n  Modify existing code\n\n**routing_algorithm.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**refund.rs**\n  Modify existing code\n\n**role.rs**\n  Modify existing code\n\n**routing_algorithm.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**dashboard_metadata.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**behaviour.rs**\n  Modify existing code\n\n**customer.rs**\n  Modify existing code\n\n**merchant_account.rs**\n  Add:\n    - function: pub::get_id\n    - impl: impl MerchantAccount\n\n**merchant_key_store.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payout_attempt.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**router_data.rs**\n  Modify existing code\n\n**flow_common_types.rs**\n  Modify existing code\n\n**connector_api_logs.rs**\n  Modify existing code\n\n**webhooks.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**analytics.rs**\n  Modify existing code\n\n**settings.rs**\n  Modify existing code\n\n**adyen.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**airwallex.rs**\n  Modify existing code\n\n**authorizedotnet.rs**\n  Modify existing code\n\n**bluesnap.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**braintree.rs**\n  Modify existing code\n\n**cashtocode.rs**\n  Modify existing code\n\n**checkout.rs**\n  Modify existing code\n\n**coinbase.rs**\n  Modify existing code\n\n**cryptopay.rs**\n  Modify existing code\n\n**globalpay.rs**\n  Modify existing code\n\n**gocardless.rs**\n  Modify existing code\n\n**gpayments_types.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**iatapay.rs**\n  Modify existing code\n\n**mifinity.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**nmi.rs**\n  Modify existing code\n\n**noon.rs**\n  Modify existing code\n\n**nuvei.rs**\n  Modify existing code\n\n**opennode.rs**\n  Modify existing code\n\n**payme.rs**\n  Modify existing code\n\n**rapyd.rs**\n  Modify existing code\n\n**razorpay.rs**\n  Modify existing code\n\n**riskified.rs**\n  Modify existing code\n\n**signifyd.rs**\n  Modify existing code\n\n**square.rs**\n  Modify existing code\n\n**stax.rs**\n  Modify existing code\n\n**stripe.rs**\n  Modify existing code\n\n**trustpay.rs**\n  Modify existing code\n\n**volt.rs**\n  Modify existing code\n\n**worldline.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**worldpay.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**zen.rs**\n  Modify existing code\n\n**zsl.rs**\n  Modify existing code\n\n**admin.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**api_locking.rs**\n  Modify existing code\n\n**apple_pay_certificates_migration.rs**\n  Modify existing code\n\n**authentication.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**blocklist.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**conditional_config.rs**\n  Modify existing code\n\n**connector_onboarding.rs**\n  Modify existing code\n\n**paypal.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**disputes.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**files.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**checkout_flow.rs**\n  Modify existing code\n\n**fulfillment_flow.rs**\n  Modify existing code\n\n**record_return.rs**\n  Modify existing code\n\n**sale_flow.rs**\n  Modify existing code\n\n**transaction_flow.rs**\n  Modify existing code\n\n**fraud_check_post.rs**\n  Modify existing code\n\n**fraud_check_pre.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**locker_migration.rs**\n  Modify existing code\n\n**mandate.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Modify existing code\n\n**cards.rs**\n  Modify existing code\n\n**migration.rs**\n  Modify existing code\n\n**surcharge_decision_configs.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**validator.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**access_token.rs**\n  Remove:\n    - impl: impl format!(\"access_token_{merchant_id}_{merchant_connector_id_or_connector_name}\")\n\n**conditional_configs.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**operations.rs**\n  Remove:\n    - struct: pub::ValidateResult\n  Add:\n    - struct: pub::ValidateResult\n\n**payment_approve.rs**\n  Modify existing code\n\n**payment_cancel.rs**\n  Modify existing code\n\n**payment_capture.rs**\n  Modify existing code\n\n**payment_complete_authorize.rs**\n  Modify existing code\n\n**payment_confirm.rs**\n  Modify existing code\n\n**payment_create.rs**\n  Modify existing code\n\n**payment_reject.rs**\n  Modify existing code\n\n**payment_response.rs**\n  Modify existing code\n\n**payment_session.rs**\n  Modify existing code\n\n**payment_start.rs**\n  Modify existing code\n\n**payment_status.rs**\n  Modify existing code\n\n**payment_update.rs**\n  Modify existing code\n\n**payments_incremental_authorization.rs**\n  Modify existing code\n\n**retry.rs**\n  Modify existing code\n\n**routing.rs**\n  Modify existing code\n\n**tokenization.rs**\n  Modify existing code\n\n**transformers.rs**\n  Modify existing code\n\n**payout_link.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**access_token.rs**\n  Remove:\n    - impl: impl format!(\"access_token_{merchant_id}_{merchant_connector_id_or_connector_name}\")\n\n**helpers.rs**\n  Modify existing code\n\n**retry.rs**\n  Modify existing code\n\n**validator.rs**\n  Modify existing code\n\n**pm_auth.rs**\n  Modify existing code\n\n**poll.rs**\n  Modify existing code\n\n**refunds.rs**\n  Modify existing code\n\n**routing.rs**\n  Modify existing code\n\n**helpers.rs**\n  Modify existing code\n\n**surcharge_decision_config.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**dashboard_metadata.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**verification.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**incoming.rs**\n  Modify existing code\n\n**outgoing.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**webhook_events.rs**\n  Modify existing code\n\n**db.rs**\n  Modify existing code\n\n**address.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**authentication.rs**\n  Modify existing code\n\n**authorization.rs**\n  Modify existing code\n\n**blocklist.rs**\n  Modify existing code\n\n**blocklist_fingerprint.rs**\n  Modify existing code\n\n**blocklist_lookup.rs**\n  Modify existing code\n\n**business_profile.rs**\n  Modify existing code\n\n**capture.rs**\n  Modify existing code\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**dashboard_metadata.rs**\n  Modify existing code\n\n**dispute.rs**\n  Modify existing code\n\n**events.rs**\n  Modify existing code\n\n**file.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**kafka_store.rs**\n  Modify existing code\n\n**locker_mock_up.rs**\n  Modify existing code\n\n**mandate.rs**\n  Modify existing code\n\n**merchant_account.rs**\n  Add:\n    - function: pub::get_id\n    - impl: impl MerchantAccount\n\n**merchant_connector_account.rs**\n  Modify existing code\n\n**merchant_key_store.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**refund.rs**\n  Modify existing code\n\n**role.rs**\n  Modify existing code\n\n**routing_algorithm.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**user_key_store.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**api_logs.rs**\n  Modify existing code\n\n**outgoing_webhook_logs.rs**\n  Modify existing code\n\n**admin.rs**\n  Modify existing code\n\n**api_keys.rs**\n  Modify existing code\n\n**app.rs**\n  Remove:\n    - function: private::add_merchant_id\n\n**customers.rs**\n  Remove:\n    - function: private::unknown_merchant\n\n**ephemeral_key.rs**\n  Modify existing code\n\n**locker_migration.rs**\n  Modify existing code\n\n**request.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_methods.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**payout_link.rs**\n  Modify existing code\n\n**recon.rs**\n  Modify existing code\n\n**verification.rs**\n  Modify existing code\n\n**webhooks.rs**\n  Modify existing code\n\n**api.rs**\n  Modify existing code\n\n**client.rs**\n  Remove:\n    - function: private::add_merchant_id\n    - function: private::add_merchant_id\n\n**authentication.rs**\n  Modify existing code\n\n**decision.rs**\n  Modify existing code\n\n**authorization.rs**\n  Modify existing code\n\n**roles.rs**\n  Modify existing code\n\n**connector_integration_interface.rs**\n  Modify existing code\n\n**conversion_impls.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**authentication.rs**\n  Modify existing code\n\n**authentication_event.rs**\n  Modify existing code\n\n**dispute.rs**\n  Modify existing code\n\n**dispute_event.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**fraud_check_event.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_attempt_event.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payment_intent_event.rs**\n  Modify existing code\n\n**payout.rs**\n  Modify existing code\n\n**refund.rs**\n  Modify existing code\n\n**refund_event.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**admin.rs**\n  Modify existing code\n\n**paypal.rs**\n  Modify existing code\n\n**verify_connector.rs**\n  Modify existing code\n\n**address.rs**\n  Modify existing code\n\n**event.rs**\n  Modify existing code\n\n**merchant_connector_account.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**user_key_store.rs**\n  Modify existing code\n\n**fraud_check.rs**\n  Modify existing code\n\n**dispute.rs**\n  Modify existing code\n\n**mandate.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_link.rs**\n  Modify existing code\n\n**payment_method.rs**\n  Modify existing code\n\n**refund.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**connector_onboarding.rs**\n  Modify existing code\n\n**user.rs**\n  Modify existing code\n\n**dashboard_metadata.rs**\n  Modify existing code\n\n**sample_data.rs**\n  Modify existing code\n\n**user_role.rs**\n  Modify existing code\n\n**api_key_expiry.rs**\n  Modify existing code\n\n**attach_payout_account_workflow.rs**\n  Modify existing code\n\n**outgoing_webhook_retry.rs**\n  Modify existing code\n\n**payment_method_status_update.rs**\n  Modify existing code\n\n**payment_sync.rs**\n  Modify existing code\n\n**aci.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**integration_demo.rs**\n  Modify existing code\n\n**payments.rs**\n  Modify existing code\n\n**payments2.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**process_data.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**lib.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payout_attempt.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payment_intent.rs**\n  Modify existing code\n\n**payout_attempt.rs**\n  Modify existing code\n\n**payouts.rs**\n  Modify existing code\n\n**kv_store.rs**\n  Modify existing code"}
