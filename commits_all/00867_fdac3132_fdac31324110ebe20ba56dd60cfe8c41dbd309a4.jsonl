{"prompt": "feat(connector): [RazorPay] Add new connector and Implement payment flows for UPI payment method (#5200)\n\nCo-authored-by: AkshayaFoiger <akshaya.shankar@juspay.in>\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**enums.rs**\n  Modify existing code\n\n**enums.rs**\n  Modify existing code\n\n**connector.rs**\n  Modify existing code\n\n**configs.rs**\n  Add:\n    - struct: pub::ConnectorParamsWithKeys\n\n**defaults.rs**\n  Modify existing code\n\n**connector.rs**\n  Modify existing code\n\n**razorpay.rs**\n  Add:\n    - function: pub::new\n    - function: private::build_headers\n    - function: private::id\n    - function: private::get_currency_unit\n    - function: private::common_get_content_type\n    - function: private::base_url\n    - function: private::build_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_webhook_object_reference_id\n    - function: private::get_webhook_event_type\n    - function: private::get_webhook_resource_object\n    - function: private::get_webhook_object_from_body\n    - struct: pub::Razorpay\n    - impl: impl Razorpay\n    - impl: impl api::Payment for Razorpay\n    - impl: impl api::PaymentSession for Razorpay\n    - impl: impl api::ConnectorAccessToken for Razorpay\n    - impl: impl api::MandateSetup for Razorpay\n    - impl: impl api::PaymentAuthorize for Razorpay\n    - impl: impl api::PaymentSync for Razorpay\n    - impl: impl api::PaymentCapture for Razorpay\n    - impl: impl api::PaymentVoid for Razorpay\n    - impl: impl api::Refund for Razorpay\n    - impl: impl api::RefundExecute for Razorpay\n    - impl: impl api::RefundSync for Razorpay\n    - impl: impl api::PaymentToken for Razorpay\n    - impl: impl ConnectorIntegration<\napi::PaymentMethodToken,\ntypes::PaymentMethodTokenizationData,\ntypes::PaymentsResponseData,\n> for Razorpay\n    - impl: impl ConnectorCommonExt<Flow, Request, Response> for Razorpay\n    - impl: impl ConnectorCommon for Razorpay\n    - impl: impl ConnectorValidation for Razorpay\n    - impl: impl ConnectorIntegration<api::Session, types::PaymentsSessionData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::AccessTokenAuth, types::AccessTokenRequestData, types::AccessToken> for Razorpay\n    - impl: impl ConnectorIntegration<\napi::SetupMandate,\ntypes::SetupMandateRequestData,\ntypes::PaymentsResponseData,\n> for Razorpay\n    - impl: impl ConnectorIntegration<api::Authorize, types::PaymentsAuthorizeData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::PSync, types::PaymentsSyncData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Capture, types::PaymentsCaptureData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Void, types::PaymentsCancelData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Execute, types::RefundsData, types::RefundsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::RSync, types::RefundsData, types::RefundsResponseData> for Razorpay\n    - impl: impl api::IncomingWebhook for Razorpay\n    - mod: pub::transformers\n\n**transformers.rs**\n  Add:\n    - function: private::try_from\n    - function: private::generate_12_digit_number\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - struct: pub::RazorpayRouterData\n    - struct: pub::RazorpayPaymentsRequest\n    - struct: pub::SecondFactor\n    - struct: pub::MerchantAccount\n    - struct: pub::OrderReference\n    - struct: pub::TxnDetail\n    - struct: pub::TxnCardInfo\n    - struct: pub::MerchantGatewayAccount\n    - struct: pub::TransactionCreateReq\n    - struct: pub::OrderMetadataV2\n    - struct: pub::RazorpayCard\n    - struct: pub::RazorpayAuthType\n    - struct: pub::JuspayAuthData\n    - struct: pub::RazorpayPaymentsResponse\n    - struct: pub::ApiMetadata\n    - struct: pub::Contents\n    - struct: pub::SecondFactorResponse\n    - struct: pub::PgrInfo\n    - struct: pub::RazorpayCreateSyncRequest\n    - struct: pub::GatewayTxnData\n    - struct: pub::AccountDetails\n    - struct: pub::RazorpaySyncResponse\n    - struct: pub::RazorpayRefundRequest\n    - struct: pub::Refund\n    - struct: pub::PaymentGatewayResponse\n    - struct: pub::RefundResponse\n    - struct: pub::RazorpayErrorResponse\n    - struct: pub::ErrorInfo\n    - struct: pub::Fields\n    - struct: pub::RazorpayWebhookEvent\n    - struct: pub::RazorpayWebhookPayload\n    - struct: pub::RazorpayPaymentWebhookPayload\n    - struct: pub::RazorpayRefundWebhookPayload\n    - struct: pub::WebhookRefundEntity\n    - struct: pub::WebhookPaymentEntity\n    - enum: pub::SecondFactorType\n    - enum: pub::SecondFactorStatus\n    - enum: pub::OrderType\n    - enum: pub::MandateFeature\n    - enum: pub::OrderStatus\n    - enum: pub::TxnType\n    - enum: pub::TxnMode\n    - enum: pub::Gateway\n    - enum: pub::Tag\n    - enum: pub::TxnStatus\n    - enum: pub::PsyncStatus\n    - enum: pub::RefundStatus\n    - enum: pub::ErrorResponse\n    - enum: pub::RazorpayWebhookEventType\n    - enum: pub::RazorpayPaymentStatus\n    - enum: pub::RazorpayRefundStatus\n    - impl: impl TryFrom<(FloatMajorUnit, T)> for RazorpayRouterData<T>\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for RazorpayPaymentsRequest\n    - impl: impl TryFrom<&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>> for SecondFactor\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for MerchantAccount\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for OrderReference\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\nUpiCollectData,\n)> for TxnCardInfo\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for TxnDetail\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for MerchantGatewayAccount\n    - impl: impl TryFrom<&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>> for OrderMetadataV2\n    - impl: impl TryFrom<&types::ConnectorAuthType> for RazorpayAuthType\n    - impl: impl TryFrom<&settings::Connectors> for JuspayAuthData\n    - impl: impl From<TxnStatus> for enums::AttemptStatus\n    - impl: impl From<enums::AttemptStatus> for TxnStatus\n    - impl: impl TryFrom<types::ResponseRouterData<F, RazorpayPaymentsResponse, T, types::PaymentsResponseData>> for types::RouterData<F, T, types::PaymentsResponseData>\n    - impl: impl TryFrom<(\nRazorpayRouterData<&types::PaymentsSyncRouterData>,\n&settings::Connectors,\n)> for RazorpayCreateSyncRequest\n    - impl: impl From<PsyncStatus> for enums::AttemptStatus\n    - impl: impl TryFrom<types::ResponseRouterData<F, RazorpaySyncResponse, T, types::PaymentsResponseData>> for types::RouterData<F, T, types::PaymentsResponseData>\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::RefundsRouterData<F>>,\n&settings::Connectors,\n)> for RazorpayRefundRequest\n    - impl: impl From<RefundStatus> for enums::RefundStatus\n    - impl: impl TryFrom<types::RefundsResponseRouterData<api::Execute, RefundResponse>> for types::RefundsRouterData<api::Execute>\n    - impl: impl TryFrom<types::RefundsResponseRouterData<api::RSync, RefundResponse>> for types::RefundsRouterData<api::RSync>\n    - impl: impl TryFrom<RazorpayWebhookPayload> for api_models::webhooks::IncomingWebhookEvent\n\n**admin.rs**\n  Modify existing code\n\n**connector_integration_v2_impls.rs**\n  Modify existing code\n\n**flows.rs**\n  Modify existing code\n\n**api.rs**\n  Modify existing code\n\n**transformers.rs**\n  Add:\n    - function: private::try_from\n    - function: private::generate_12_digit_number\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - struct: pub::RazorpayRouterData\n    - struct: pub::RazorpayPaymentsRequest\n    - struct: pub::SecondFactor\n    - struct: pub::MerchantAccount\n    - struct: pub::OrderReference\n    - struct: pub::TxnDetail\n    - struct: pub::TxnCardInfo\n    - struct: pub::MerchantGatewayAccount\n    - struct: pub::TransactionCreateReq\n    - struct: pub::OrderMetadataV2\n    - struct: pub::RazorpayCard\n    - struct: pub::RazorpayAuthType\n    - struct: pub::JuspayAuthData\n    - struct: pub::RazorpayPaymentsResponse\n    - struct: pub::ApiMetadata\n    - struct: pub::Contents\n    - struct: pub::SecondFactorResponse\n    - struct: pub::PgrInfo\n    - struct: pub::RazorpayCreateSyncRequest\n    - struct: pub::GatewayTxnData\n    - struct: pub::AccountDetails\n    - struct: pub::RazorpaySyncResponse\n    - struct: pub::RazorpayRefundRequest\n    - struct: pub::Refund\n    - struct: pub::PaymentGatewayResponse\n    - struct: pub::RefundResponse\n    - struct: pub::RazorpayErrorResponse\n    - struct: pub::ErrorInfo\n    - struct: pub::Fields\n    - struct: pub::RazorpayWebhookEvent\n    - struct: pub::RazorpayWebhookPayload\n    - struct: pub::RazorpayPaymentWebhookPayload\n    - struct: pub::RazorpayRefundWebhookPayload\n    - struct: pub::WebhookRefundEntity\n    - struct: pub::WebhookPaymentEntity\n    - enum: pub::SecondFactorType\n    - enum: pub::SecondFactorStatus\n    - enum: pub::OrderType\n    - enum: pub::MandateFeature\n    - enum: pub::OrderStatus\n    - enum: pub::TxnType\n    - enum: pub::TxnMode\n    - enum: pub::Gateway\n    - enum: pub::Tag\n    - enum: pub::TxnStatus\n    - enum: pub::PsyncStatus\n    - enum: pub::RefundStatus\n    - enum: pub::ErrorResponse\n    - enum: pub::RazorpayWebhookEventType\n    - enum: pub::RazorpayPaymentStatus\n    - enum: pub::RazorpayRefundStatus\n    - impl: impl TryFrom<(FloatMajorUnit, T)> for RazorpayRouterData<T>\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for RazorpayPaymentsRequest\n    - impl: impl TryFrom<&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>> for SecondFactor\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for MerchantAccount\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for OrderReference\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\nUpiCollectData,\n)> for TxnCardInfo\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for TxnDetail\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>,\n&settings::Connectors,\n)> for MerchantGatewayAccount\n    - impl: impl TryFrom<&RazorpayRouterData<&types::PaymentsAuthorizeRouterData>> for OrderMetadataV2\n    - impl: impl TryFrom<&types::ConnectorAuthType> for RazorpayAuthType\n    - impl: impl TryFrom<&settings::Connectors> for JuspayAuthData\n    - impl: impl From<TxnStatus> for enums::AttemptStatus\n    - impl: impl From<enums::AttemptStatus> for TxnStatus\n    - impl: impl TryFrom<types::ResponseRouterData<F, RazorpayPaymentsResponse, T, types::PaymentsResponseData>> for types::RouterData<F, T, types::PaymentsResponseData>\n    - impl: impl TryFrom<(\nRazorpayRouterData<&types::PaymentsSyncRouterData>,\n&settings::Connectors,\n)> for RazorpayCreateSyncRequest\n    - impl: impl From<PsyncStatus> for enums::AttemptStatus\n    - impl: impl TryFrom<types::ResponseRouterData<F, RazorpaySyncResponse, T, types::PaymentsResponseData>> for types::RouterData<F, T, types::PaymentsResponseData>\n    - impl: impl TryFrom<(\n&RazorpayRouterData<&types::RefundsRouterData<F>>,\n&settings::Connectors,\n)> for RazorpayRefundRequest\n    - impl: impl From<RefundStatus> for enums::RefundStatus\n    - impl: impl TryFrom<types::RefundsResponseRouterData<api::Execute, RefundResponse>> for types::RefundsRouterData<api::Execute>\n    - impl: impl TryFrom<types::RefundsResponseRouterData<api::RSync, RefundResponse>> for types::RefundsRouterData<api::RSync>\n    - impl: impl TryFrom<RazorpayWebhookPayload> for api_models::webhooks::IncomingWebhookEvent\n\n**main.rs**\n  Add:\n    - mod: private::razorpay\n\n**razorpay.rs**\n  Add:\n    - function: pub::new\n    - function: private::build_headers\n    - function: private::id\n    - function: private::get_currency_unit\n    - function: private::common_get_content_type\n    - function: private::base_url\n    - function: private::build_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::get_request_body\n    - function: private::build_request\n    - function: private::handle_response\n    - function: private::get_error_response\n    - function: private::get_webhook_object_reference_id\n    - function: private::get_webhook_event_type\n    - function: private::get_webhook_resource_object\n    - function: private::get_webhook_object_from_body\n    - struct: pub::Razorpay\n    - impl: impl Razorpay\n    - impl: impl api::Payment for Razorpay\n    - impl: impl api::PaymentSession for Razorpay\n    - impl: impl api::ConnectorAccessToken for Razorpay\n    - impl: impl api::MandateSetup for Razorpay\n    - impl: impl api::PaymentAuthorize for Razorpay\n    - impl: impl api::PaymentSync for Razorpay\n    - impl: impl api::PaymentCapture for Razorpay\n    - impl: impl api::PaymentVoid for Razorpay\n    - impl: impl api::Refund for Razorpay\n    - impl: impl api::RefundExecute for Razorpay\n    - impl: impl api::RefundSync for Razorpay\n    - impl: impl api::PaymentToken for Razorpay\n    - impl: impl ConnectorIntegration<\napi::PaymentMethodToken,\ntypes::PaymentMethodTokenizationData,\ntypes::PaymentsResponseData,\n> for Razorpay\n    - impl: impl ConnectorCommonExt<Flow, Request, Response> for Razorpay\n    - impl: impl ConnectorCommon for Razorpay\n    - impl: impl ConnectorValidation for Razorpay\n    - impl: impl ConnectorIntegration<api::Session, types::PaymentsSessionData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::AccessTokenAuth, types::AccessTokenRequestData, types::AccessToken> for Razorpay\n    - impl: impl ConnectorIntegration<\napi::SetupMandate,\ntypes::SetupMandateRequestData,\ntypes::PaymentsResponseData,\n> for Razorpay\n    - impl: impl ConnectorIntegration<api::Authorize, types::PaymentsAuthorizeData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::PSync, types::PaymentsSyncData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Capture, types::PaymentsCaptureData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Void, types::PaymentsCancelData, types::PaymentsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::Execute, types::RefundsData, types::RefundsResponseData> for Razorpay\n    - impl: impl ConnectorIntegration<api::RSync, types::RefundsData, types::RefundsResponseData> for Razorpay\n    - impl: impl api::IncomingWebhook for Razorpay\n    - mod: pub::transformers\n\n**misc.rs**\n  Modify existing code\n\n**connector_auth.rs**\n  Modify existing code"}
