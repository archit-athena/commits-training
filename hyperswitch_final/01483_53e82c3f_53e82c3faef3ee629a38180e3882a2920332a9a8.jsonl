{"prompt": "feat(core): add payments post_session_tokens flow (#6202)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>", "response": "Files to modify:\n\n\n**payment.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsPostSessionTokensRequest\n    - impl: impl ApiEventMetric for PaymentsPostSessionTokensResponse\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**payment_attempt.rs**\n  Modify existing code\n\n**default_implementations.rs**\n  Modify existing code\n\n**default_implementations_v2.rs**\n  Add:\n    - impl: impl PaymentPostSessionTokensV2 for $connector\n    - impl: impl ConnectorIntegrationV2<\nPostSessionTokens,\nPaymentFlowData,\nPaymentsPostSessionTokensData,\nPaymentsResponseData,\n> for $connector\n\n**payment_attempt.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**router_request_types.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensData\n\n**types.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**payments_v2.rs**\n  Add:\n    - trait: pub::PaymentPostSessionTokensV2\n\n**types.rs**\n  Modify existing code\n\n**openapi.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**defaults.rs**\n  Modify existing code\n\n**paypal.rs**\n  Add:\n    - function: private::get_headers\n    - function: private::get_content_type\n    - function: private::get_url\n    - function: private::build_request\n    - function: private::get_request_body\n    - function: private::handle_response\n    - function: private::get_error_response\n    - impl: impl api::PaymentPostSessionTokens for Paypal\n    - impl: impl ConnectorIntegration<\napi::PostSessionTokens,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n> for Paypal\n\n**transformers.rs**\n  Remove:\n    - impl: impl ForeignTryFrom<(\ntypes::ResponseRouterData<F, PaypalRedirectResponse, T, types::PaymentsResponseData>,\ndomain::PaymentMethodData,\n)> for types::RouterData<F, T, types::PaymentsResponseData>\n  Add:\n    - function: private::from\n    - function: private::from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for OrderRequestAmount\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for ItemDetails\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for ShippingAddress\n    - impl: impl TryFrom<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for PaypalPaymentsRequest\n    - impl: impl TryFrom<\ntypes::ResponseRouterData<\napi::Authorize,\nPaypalRedirectResponse,\ntypes::PaymentsAuthorizeData,\ntypes::PaymentsResponseData,\n>,\n> for types::PaymentsAuthorizeRouterData\n\n**utils.rs**\n  Add:\n    - function: private::is_auto_capture\n    - trait: pub::PaymentsPostSessionTokensRequestData\n    - impl: impl PaymentsPostSessionTokensRequestData for types::PaymentsPostSessionTokensData\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**connector_integration_v2_impls.rs**\n  Add:\n    - impl: impl api::PaymentPostSessionTokensV2 for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegrationV2<\napi::PostSessionTokens,\ntypes::PaymentFlowData,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - impl: impl api::PaymentPostSessionTokensV2 for $connector\n    - impl: impl services::ConnectorIntegrationV2<\napi::PostSessionTokens,\ntypes::PaymentFlowData,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n> for $connector\n\n**flows.rs**\n  Add:\n    - impl: impl api::PaymentPostSessionTokens for connector::DummyConnector<T>\n    - impl: impl services::ConnectorIntegration<\napi::PostSessionTokens,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n> for connector::DummyConnector<T>\n    - mod: pub::post_session_tokens_flow\n\n**post_session_tokens_flow.rs**\n  Add:\n    - function: private::construct_router_data\n    - function: private::get_merchant_recipient_data\n    - function: private::decide_flows\n    - function: private::add_access_token\n    - function: private::build_flow_specific_connector_request\n    - impl: impl ConstructFlowSpecificData<\napi::PostSessionTokens,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n> for PaymentData<api::PostSessionTokens>\n    - impl: impl Feature<api::PostSessionTokens, types::PaymentsPostSessionTokensData> for types::RouterData<\napi::PostSessionTokens,\ntypes::PaymentsPostSessionTokensData,\ntypes::PaymentsResponseData,\n>\n\n**session_flow.rs**\n  Modify existing code\n\n**operations.rs**\n  Add:\n    - mod: pub::payment_post_session_tokens\n\n**payment_post_session_tokens.rs**\n  Add:\n    - function: private::get_trackers\n    - function: private::get_or_create_customer_details\n    - function: private::make_pm_data\n    - function: private::get_connector\n    - function: private::guard_payment_against_blocklist\n    - function: private::update_trackers\n    - function: private::validate_request\n    - struct: pub::PaymentPostSessionTokens\n    - impl: impl GetTracker<F, PaymentData<F>, api::PaymentsPostSessionTokensRequest> for PaymentPostSessionTokens\n    - impl: impl Domain<F, api::PaymentsPostSessionTokensRequest, PaymentData<F>> for PaymentPostSessionTokens\n    - impl: impl UpdateTracker<F, PaymentData<F>, api::PaymentsPostSessionTokensRequest> for PaymentPostSessionTokens\n    - impl: impl ValidateRequest<F, api::PaymentsPostSessionTokensRequest, PaymentData<F>> for PaymentPostSessionTokens\n\n**payment_response.rs**\n  Add:\n    - function: private::update_tracker\n    - impl: impl PostUpdateTracker<F, PaymentData<F>, types::PaymentsPostSessionTokensData> for PaymentResponse\n\n**transformers.rs**\n  Remove:\n    - impl: impl ForeignTryFrom<(\ntypes::ResponseRouterData<F, PaypalRedirectResponse, T, types::PaymentsResponseData>,\ndomain::PaymentMethodData,\n)> for types::RouterData<F, T, types::PaymentsResponseData>\n  Add:\n    - function: private::from\n    - function: private::from\n    - function: private::from\n    - function: private::try_from\n    - function: private::try_from\n    - function: private::try_from\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for OrderRequestAmount\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for ItemDetails\n    - impl: impl From<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for ShippingAddress\n    - impl: impl TryFrom<&PaypalRouterData<&types::PaymentsPostSessionTokensRouterData>> for PaypalPaymentsRequest\n    - impl: impl TryFrom<\ntypes::ResponseRouterData<\napi::Authorize,\nPaypalRedirectResponse,\ntypes::PaymentsAuthorizeData,\ntypes::PaymentsResponseData,\n>,\n> for types::PaymentsAuthorizeRouterData\n\n**app.rs**\n  Modify existing code\n\n**lock_utils.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**api.rs**\n  Add:\n    - function: private::get_client_secret\n    - impl: impl Authenticate for api_models::payments::PaymentsPostSessionTokensRequest\n\n**authentication.rs**\n  Add:\n    - function: private::get_client_secret\n    - impl: impl ClientSecretFetch for payments::PaymentsPostSessionTokensRequest\n\n**types.rs**\n  Modify existing code\n\n**payments.rs**\n  Add:\n    - struct: pub::PaymentsPostSessionTokensRequest\n    - struct: pub::PaymentsPostSessionTokensResponse\n\n**payments_v2.rs**\n  Add:\n    - trait: pub::PaymentPostSessionTokensV2\n\n**operation.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code"}
