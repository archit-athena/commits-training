{"prompt": "feat(analytics): Add metrics, filters and APIs for Analytics v2 Dashboard - Payments Page (#5870)\n\nCo-authored-by: hyperswitch-bot[bot] <148525504+hyperswitch-bot[bot]@users.noreply.github.com>\nCo-authored-by: Sampras Lopes <Sampras.lopes@juspay.in>\nCo-authored-by: Sampras Lopes <lsampras@pm.me>", "response": "Files to modify:\n\n\n**clickhouse.rs**\n  Modify existing code\n\n**lib.rs**\n  Modify existing code\n\n**payment_intents.rs**\n  Add:\n    - mod: pub::sankey\n\n**accumulator.rs**\n  Remove:\n    - struct: pub::SumAccumulator\n  Add:\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: private::add_metrics_bucket\n    - struct: pub::SmartRetriedAmountAccumulator\n    - struct: pub::PaymentsSuccessRateAccumulator\n    - struct: pub::ProcessedAmountAccumulator\n    - struct: pub::PaymentsDistributionAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for PaymentsSuccessRateAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for ProcessedAmountAccumulator\n\n**core.rs**\n  Add:\n    - function: pub::get_sankey\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Add:\n    - mod: private::payments_success_rate\n    - mod: private::sessionized_metrics\n\n**payment_intent_count.rs**\n  Modify existing code\n\n**payments_success_rate.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentsSuccessRate\n    - impl: impl super::PaymentIntentMetric<T> for PaymentsSuccessRate\n\n**mod.rs**\n  Add:\n    - mod: private::payment_intent_count\n    - mod: private::payment_processed_amount\n    - mod: private::payments_distribution\n    - mod: private::payments_success_rate\n    - mod: private::smart_retried_amount\n    - mod: private::successful_smart_retries\n    - mod: private::total_smart_retries\n\n**payment_intent_count.rs**\n  Modify existing code\n\n**payment_processed_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentProcessedAmount\n    - impl: impl super::PaymentIntentMetric<T> for PaymentProcessedAmount\n\n**payments_distribution.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentsDistribution\n    - impl: impl super::PaymentIntentMetric<T> for PaymentsDistribution\n\n**payments_success_rate.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentsSuccessRate\n    - impl: impl super::PaymentIntentMetric<T> for PaymentsSuccessRate\n\n**smart_retried_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SmartRetriedAmount\n    - impl: impl super::PaymentIntentMetric<T> for SmartRetriedAmount\n\n**successful_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SuccessfulSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for SuccessfulSmartRetries\n\n**total_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::TotalSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for TotalSmartRetries\n\n**smart_retried_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SmartRetriedAmount\n    - impl: impl super::PaymentIntentMetric<T> for SmartRetriedAmount\n\n**successful_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::SuccessfulSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for SuccessfulSmartRetries\n\n**total_smart_retries.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::TotalSmartRetries\n    - impl: impl super::PaymentIntentMetric<T> for TotalSmartRetries\n\n**sankey.rs**\n  Add:\n    - function: private::try_into\n    - function: pub::get_sankey_data\n    - struct: pub::PaymentIntentMetricRow\n    - struct: pub::SankeyRow\n    - enum: pub::SessionizerRefundStatus\n    - impl: impl TryInto<SankeyRow> for serde_json::Value\n\n**types.rs**\n  Modify existing code\n\n**accumulator.rs**\n  Remove:\n    - struct: pub::SumAccumulator\n  Add:\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: private::add_metrics_bucket\n    - function: private::collect\n    - function: private::add_metrics_bucket\n    - struct: pub::SmartRetriedAmountAccumulator\n    - struct: pub::PaymentsSuccessRateAccumulator\n    - struct: pub::ProcessedAmountAccumulator\n    - struct: pub::PaymentsDistributionAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for PaymentsSuccessRateAccumulator\n    - impl: impl PaymentIntentMetricAccumulator for ProcessedAmountAccumulator\n\n**core.rs**\n  Add:\n    - function: pub::get_sankey\n\n**distribution.rs**\n  Modify existing code\n\n**payment_error_message.rs**\n  Modify existing code\n\n**filters.rs**\n  Modify existing code\n\n**metrics.rs**\n  Add:\n    - mod: private::payments_success_rate\n    - mod: private::sessionized_metrics\n\n**avg_ticket_size.rs**\n  Modify existing code\n\n**connector_success_rate.rs**\n  Modify existing code\n\n**payment_count.rs**\n  Modify existing code\n\n**payment_processed_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentProcessedAmount\n    - impl: impl super::PaymentIntentMetric<T> for PaymentProcessedAmount\n\n**payment_success_count.rs**\n  Modify existing code\n\n**retries_count.rs**\n  Modify existing code\n\n**avg_ticket_size.rs**\n  Modify existing code\n\n**connector_success_rate.rs**\n  Modify existing code\n\n**failure_reasons.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::FailureReasons\n    - impl: impl super::PaymentMetric<T> for FailureReasons\n\n**mod.rs**\n  Add:\n    - mod: private::payment_intent_count\n    - mod: private::payment_processed_amount\n    - mod: private::payments_distribution\n    - mod: private::payments_success_rate\n    - mod: private::smart_retried_amount\n    - mod: private::successful_smart_retries\n    - mod: private::total_smart_retries\n\n**payment_count.rs**\n  Modify existing code\n\n**payment_processed_amount.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentProcessedAmount\n    - impl: impl super::PaymentIntentMetric<T> for PaymentProcessedAmount\n\n**payment_success_count.rs**\n  Modify existing code\n\n**payments_distribution.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentsDistribution\n    - impl: impl super::PaymentIntentMetric<T> for PaymentsDistribution\n\n**retries_count.rs**\n  Modify existing code\n\n**success_rate.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentSuccessRate\n    - impl: impl super::PaymentMetric<T> for PaymentSuccessRate\n\n**success_rate.rs**\n  Add:\n    - function: private::load_metrics\n    - struct: pub::PaymentSuccessRate\n    - impl: impl super::PaymentMetric<T> for PaymentSuccessRate\n\n**types.rs**\n  Modify existing code\n\n**query.rs**\n  Add:\n    - function: private::fmt\n    - function: private::to_sql\n    - function: private::default\n    - function: private::to_sql\n    - function: pub::add_nested_filter_clause\n    - function: pub::add_order_by_clause\n    - function: pub::set_limit_by\n    - struct: pub::LimitByClause\n    - enum: pub::FilterCombinator\n    - enum: pub::Filter\n    - impl: impl fmt::Display for LimitByClause\n    - impl: impl ToSql<T> for FilterCombinator\n    - impl: impl Default for Filter\n    - impl: impl ToSql<T> for Filter\n\n**sqlx.rs**\n  Modify existing code\n\n**types.rs**\n  Modify existing code\n\n**utils.rs**\n  Modify existing code\n\n**analytics.rs**\n  Add:\n    - struct: pub::PaymentsAnalyticsMetadata\n    - struct: pub::PaymentIntentsAnalyticsMetadata\n    - struct: pub::PaymentsMetricsResponse\n    - struct: pub::PaymentIntentsMetricsResponse\n    - struct: pub::SankeyResponse\n\n**payment_intents.rs**\n  Add:\n    - mod: pub::sankey\n\n**payments.rs**\n  Modify existing code\n\n**events.rs**\n  Add:\n    - function: private::get_api_event_type\n    - function: private::get_api_event_type\n    - impl: impl ApiEventMetric for PaymentsMetricsResponse<T>\n    - impl: impl ApiEventMetric for PaymentIntentsMetricsResponse<T>\n\n**analytics.rs**\n  Add:\n    - struct: pub::PaymentsAnalyticsMetadata\n    - struct: pub::PaymentIntentsAnalyticsMetadata\n    - struct: pub::PaymentsMetricsResponse\n    - struct: pub::PaymentIntentsMetricsResponse\n    - struct: pub::SankeyResponse"}
