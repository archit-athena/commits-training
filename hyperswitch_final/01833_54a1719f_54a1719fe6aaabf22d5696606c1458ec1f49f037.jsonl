{"prompt": "refactor(middleware): add middleware to record metrics for request count and duration (#7803)", "response": "Files to modify:\n\n\n**request.rs**\n  Remove:\n    - function: pub::time_future\n\n**wrap.rs**\n  Modify existing code\n\n**lib.rs**\n  Modify existing code\n\n**middleware.rs**\n  Add:\n    - function: private::new_transform\n    - function: private::call\n    - struct: pub::RequestResponseMetrics\n    - struct: pub::RequestResponseMetricsMiddleware\n    - impl: impl actix_web::dev::Transform<S, actix_web::dev::ServiceRequest> for RequestResponseMetrics\n    - impl: impl actix_web::dev::Service<actix_web::dev::ServiceRequest> for RequestResponseMetricsMiddleware<S>\n\n**metrics.rs**\n  Remove:\n    - mod: pub::utils\n\n**request.rs**\n  Remove:\n    - function: pub::time_future\n\n**utils.rs**\n  Remove:\n    - function: pub::time_future\n\n**api.rs**\n  Modify existing code"}
